
<!doctype HTML>
<head>
  <title>Tree-sitter Highlighting</title>
  <style>
    body {
      font-family: monospace
    }
    .line-number {
      user-select: none;
      text-align: right;
      color: rgba(27,31,35,.3);
      padding: 0 10px;
    }
    .line {
      white-space: pre;
    }
  </style>
</head>
<body>

<table>
<tr><td class=line-number>1</td><td class=line>import error <span style='color: #4e4e4e'>{</span> <span style='color: #af8700'>JaktError</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2</td><td class=line>import parser <span style='color: #4e4e4e'>{</span> <span style='color: #af8700'>BinaryOperator</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>DefinitionLinkage</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>DefinitionType</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>3</td><td class=line>                <span style='color: #af8700'>FunctionLinkage</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>FunctionType</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>ParsedBlock</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>ParsedCall</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>4</td><td class=line>                <span style='color: #af8700'>ParsedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>ParsedFunction</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>ParsedNamespace</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>5</td><td class=line>                <span style='color: #af8700'>ParsedType</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>ParsedStatement</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>ParsedVarDecl</span><span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>RecordType</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>6</td><td class=line>import utility <span style='color: #4e4e4e'>{</span> panic<span style='color: #4e4e4e'>,</span> todo<span style='color: #4e4e4e'>,</span> <span style='color: #af8700'>Span</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>7</td><td class=line>
</td></tr>
<tr><td class=line-number>8</td><td class=line><span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>SafetyMode</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>9</td><td class=line>    <span style='color: #af8700'>Safe</span>
</td></tr>
<tr><td class=line-number>10</td><td class=line>    <span style='color: #af8700'>Unsafe</span>
</td></tr>
<tr><td class=line-number>11</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>12</td><td class=line>
</td></tr>
<tr><td class=line-number>13</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>ModuleId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>14</td><td class=line>    <span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span>
</td></tr>
<tr><td class=line-number>15</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>16</td><td class=line>
</td></tr>
<tr><td class=line-number>17</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>VarId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>18</td><td class=line>    <span style='color: #af0000'>module</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span>
</td></tr>
<tr><td class=line-number>19</td><td class=line>    <span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span>
</td></tr>
<tr><td class=line-number>20</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>21</td><td class=line>
</td></tr>
<tr><td class=line-number>22</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>FunctionId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>23</td><td class=line>    <span style='color: #af0000'>module</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span>
</td></tr>
<tr><td class=line-number>24</td><td class=line>    <span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span>
</td></tr>
<tr><td class=line-number>25</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>26</td><td class=line>
</td></tr>
<tr><td class=line-number>27</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>StructId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>28</td><td class=line>    <span style='color: #af0000'>module</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span>
</td></tr>
<tr><td class=line-number>29</td><td class=line>    <span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span>
</td></tr>
<tr><td class=line-number>30</td><td class=line>
</td></tr>
<tr><td class=line-number>31</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>StructId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>32</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> == rhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> <span style='color: #5f00d7'>and</span> <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> == rhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span>
</td></tr>
<tr><td class=line-number>33</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>34</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>35</td><td class=line>
</td></tr>
<tr><td class=line-number>36</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>EnumId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>37</td><td class=line>    <span style='color: #af0000'>module</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span>
</td></tr>
<tr><td class=line-number>38</td><td class=line>    <span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span>
</td></tr>
<tr><td class=line-number>39</td><td class=line>
</td></tr>
<tr><td class=line-number>40</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>EnumId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>41</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> == rhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> <span style='color: #5f00d7'>and</span> <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> == rhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span>
</td></tr>
<tr><td class=line-number>42</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>43</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>44</td><td class=line>
</td></tr>
<tr><td class=line-number>45</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>TypeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>46</td><td class=line>    <span style='color: #af0000'>module</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span>
</td></tr>
<tr><td class=line-number>47</td><td class=line>    <span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span>
</td></tr>
<tr><td class=line-number>48</td><td class=line>
</td></tr>
<tr><td class=line-number>49</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>50</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> == rhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> <span style='color: #5f00d7'>and</span> <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> == rhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span>
</td></tr>
<tr><td class=line-number>51</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>52</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>53</td><td class=line>
</td></tr>
<tr><td class=line-number>54</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>InferenceId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>55</td><td class=line>    <span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span>
</td></tr>
<tr><td class=line-number>56</td><td class=line>
</td></tr>
<tr><td class=line-number>57</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>InferenceId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>58</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// FIXME: this should do follow the inference id</span>
</td></tr>
<tr><td class=line-number>59</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// to see what the type is being inferred to be,</span>
</td></tr>
<tr><td class=line-number>60</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// and check if both types are equal</span>
</td></tr>
<tr><td class=line-number>61</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> == rhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span>
</td></tr>
<tr><td class=line-number>62</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>63</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>64</td><td class=line>
</td></tr>
<tr><td class=line-number>65</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>ScopeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>66</td><td class=line>    <span style='color: #af0000'>module</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span>
</td></tr>
<tr><td class=line-number>67</td><td class=line>    <span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span>
</td></tr>
<tr><td class=line-number>68</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>69</td><td class=line>
</td></tr>
<tr><td class=line-number>70</td><td class=line><span style='color: #5f00d7'>enum</span> <span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>71</td><td class=line>    <span style='color: #af8700'>Void</span> = <span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>72</td><td class=line>    <span style='color: #af8700'>Bool</span> = <span style='font-weight: bold;color: #875f00'>1</span>
</td></tr>
<tr><td class=line-number>73</td><td class=line>    <span style='color: #af8700'>U8</span> = <span style='font-weight: bold;color: #875f00'>2</span>
</td></tr>
<tr><td class=line-number>74</td><td class=line>    <span style='color: #af8700'>U16</span> = <span style='font-weight: bold;color: #875f00'>3</span>
</td></tr>
<tr><td class=line-number>75</td><td class=line>    <span style='color: #af8700'>U32</span> = <span style='font-weight: bold;color: #875f00'>4</span>
</td></tr>
<tr><td class=line-number>76</td><td class=line>    <span style='color: #af8700'>U64</span> = <span style='font-weight: bold;color: #875f00'>5</span>
</td></tr>
<tr><td class=line-number>77</td><td class=line>    <span style='color: #af8700'>I8</span> = <span style='font-weight: bold;color: #875f00'>6</span>
</td></tr>
<tr><td class=line-number>78</td><td class=line>    <span style='color: #af8700'>I16</span> = <span style='font-weight: bold;color: #875f00'>7</span>
</td></tr>
<tr><td class=line-number>79</td><td class=line>    <span style='color: #af8700'>I32</span> = <span style='font-weight: bold;color: #875f00'>8</span>
</td></tr>
<tr><td class=line-number>80</td><td class=line>    <span style='color: #af8700'>I64</span> = <span style='font-weight: bold;color: #875f00'>9</span>
</td></tr>
<tr><td class=line-number>81</td><td class=line>    <span style='color: #af8700'>F32</span> = <span style='font-weight: bold;color: #875f00'>10</span>
</td></tr>
<tr><td class=line-number>82</td><td class=line>    <span style='color: #af8700'>F64</span> = <span style='font-weight: bold;color: #875f00'>11</span>
</td></tr>
<tr><td class=line-number>83</td><td class=line>    <span style='color: #af8700'>Usize</span> = <span style='font-weight: bold;color: #875f00'>12</span>
</td></tr>
<tr><td class=line-number>84</td><td class=line>    <span style='color: #af8700'>String</span> = <span style='font-weight: bold;color: #875f00'>13</span>
</td></tr>
<tr><td class=line-number>85</td><td class=line>    <span style='color: #af8700'>CChar</span> = <span style='font-weight: bold;color: #875f00'>14</span>
</td></tr>
<tr><td class=line-number>86</td><td class=line>    <span style='color: #af8700'>CString</span> = <span style='font-weight: bold;color: #875f00'>15</span>
</td></tr>
<tr><td class=line-number>87</td><td class=line>    <span style='color: #af8700'>CInt</span> = <span style='font-weight: bold;color: #875f00'>16</span>
</td></tr>
<tr><td class=line-number>88</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>89</td><td class=line>
</td></tr>
<tr><td class=line-number>90</td><td class=line><span style='color: #5f00d7'>boxed</span> <span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>Type</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>91</td><td class=line>    <span style='color: #af8700'>Void</span>
</td></tr>
<tr><td class=line-number>92</td><td class=line>    <span style='color: #af8700'>Bool</span>
</td></tr>
<tr><td class=line-number>93</td><td class=line>    <span style='color: #af8700'>U8</span>
</td></tr>
<tr><td class=line-number>94</td><td class=line>    <span style='color: #af8700'>U16</span>
</td></tr>
<tr><td class=line-number>95</td><td class=line>    <span style='color: #af8700'>U32</span>
</td></tr>
<tr><td class=line-number>96</td><td class=line>    <span style='color: #af8700'>U64</span>
</td></tr>
<tr><td class=line-number>97</td><td class=line>    <span style='color: #af8700'>I8</span>
</td></tr>
<tr><td class=line-number>98</td><td class=line>    <span style='color: #af8700'>I16</span>
</td></tr>
<tr><td class=line-number>99</td><td class=line>    <span style='color: #af8700'>I32</span>
</td></tr>
<tr><td class=line-number>100</td><td class=line>    <span style='color: #af8700'>I64</span>
</td></tr>
<tr><td class=line-number>101</td><td class=line>    <span style='color: #af8700'>F32</span>
</td></tr>
<tr><td class=line-number>102</td><td class=line>    <span style='color: #af8700'>F64</span>
</td></tr>
<tr><td class=line-number>103</td><td class=line>    <span style='color: #af8700'>Usize</span>
</td></tr>
<tr><td class=line-number>104</td><td class=line>    <span style='color: #af8700'>JaktString</span>
</td></tr>
<tr><td class=line-number>105</td><td class=line>    <span style='color: #af8700'>CChar</span>
</td></tr>
<tr><td class=line-number>106</td><td class=line>    <span style='color: #af8700'>CInt</span>
</td></tr>
<tr><td class=line-number>107</td><td class=line>    <span style='color: #af8700'>CString</span>
</td></tr>
<tr><td class=line-number>108</td><td class=line>    <span style='color: #af8700'>TypeVariable</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>109</td><td class=line>    <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>StructId</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>args</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>110</td><td class=line>    <span style='color: #af8700'>GenericEnumInstance</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>EnumId</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>args</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>111</td><td class=line>    <span style='color: #af8700'>Struct</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>StructId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>112</td><td class=line>    <span style='color: #af8700'>Enum</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>EnumId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>113</td><td class=line>    <span style='color: #af8700'>Inference</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>InferenceId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>114</td><td class=line>    <span style='color: #af8700'>RawPtr</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>115</td><td class=line>
</td></tr>
<tr><td class=line-number>116</td><td class=line>    function equals<span style='color: #4e4e4e'>(</span><span style='color: #af0000'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='color: #af0000'>rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Type</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>117</td><td class=line>        <span style='color: #af0000'>if</span> this is <span style='color: #af0000'>Void</span> <span style='color: #5f00d7'>and</span> <span style='color: #af0000'>rhs</span> is <span style='color: #af0000'>Void</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>118</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>119</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>Bool</span> and rhs is <span style='color: #af8700'>Bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>120</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>121</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>U8</span> and rhs is <span style='color: #af8700'>U8</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>122</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>123</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>U16</span> and rhs is <span style='color: #af8700'>U16</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>124</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>125</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>U32</span> and rhs is <span style='color: #af8700'>U32</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>126</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>127</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>U64</span> and rhs is <span style='color: #af8700'>U64</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>128</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>129</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>I8</span> and rhs is <span style='color: #af8700'>I8</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>130</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>131</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>I16</span> and rhs is <span style='color: #af8700'>I16</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>132</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>133</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>I32</span> and rhs is <span style='color: #af8700'>I32</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>134</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>135</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>I64</span> and rhs is <span style='color: #af8700'>I64</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>136</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>137</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>F32</span> and rhs is <span style='color: #af8700'>F32</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>138</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>139</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>F64</span> and rhs is <span style='color: #af8700'>F64</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>140</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>141</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>Usize</span> and rhs is <span style='color: #af8700'>Usize</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>142</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>143</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>JaktString</span> and rhs is <span style='color: #af8700'>JaktString</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>144</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>145</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>CChar</span> and rhs is <span style='color: #af8700'>CChar</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>146</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>147</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>CInt</span> and rhs is <span style='color: #af8700'>CInt</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>148</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>149</td><td class=line>        <span style='color: #4e4e4e'>}</span> else if this is <span style='color: #af8700'>CString</span> and rhs is <span style='color: #af8700'>CString</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>150</td><td class=line>            <span style='color: #af0000'>return</span> true
</td></tr>
<tr><td class=line-number>151</td><td class=line>        <span style='color: #4e4e4e'>}</span> else <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>152</td><td class=line>            <span style='color: #af0000'>match</span> this <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>153</td><td class=line>                <span style='color: #af0000'>TypeVariable</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>lhs_name</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>154</td><td class=line>                    <span style='color: #5f00d7'>match</span> <span style='color: #af0000'>rhs</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>155</td><td class=line>                        <span style='color: #af0000'>TypeVariable</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>rhs_name</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>156</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='color: #af0000'>lhs_name</span> == <span style='color: #af0000'>rhs_name</span>
</td></tr>
<tr><td class=line-number>157</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>158</td><td class=line>                        else =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>159</td><td class=line>                            <span style='color: #af0000'>return</span> false
</td></tr>
<tr><td class=line-number>160</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>161</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>162</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>163</td><td class=line>                <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> lhs_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> lhs_args<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>164</td><td class=line>                    <span style='color: #5f00d7'>match</span> rhs <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>165</td><td class=line>                        <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> rhs_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> rhs_args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>166</td><td class=line>                            <span style='color: #5f00d7'>if</span> lhs_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> lhs_args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> == rhs_args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>167</td><td class=line>                                <span style='color: #5f00d7'>mut</span> idx = <span style='font-weight: bold;color: #875f00'>0uz</span>
</td></tr>
<tr><td class=line-number>168</td><td class=line>
</td></tr>
<tr><td class=line-number>169</td><td class=line>                                <span style='color: #5f00d7'>while</span> idx &lt; lhs_args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>170</td><td class=line>                                    <span style='color: #5f00d7'>if</span> lhs_args<span style='color: #4e4e4e'>[</span>idx<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_args<span style='color: #4e4e4e'>[</span>idx<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>171</td><td class=line>                                        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>172</td><td class=line>                                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>173</td><td class=line>                                    idx++
</td></tr>
<tr><td class=line-number>174</td><td class=line>                                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>175</td><td class=line>                                <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>176</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>177</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>178</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>179</td><td class=line>                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>180</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>181</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>182</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>183</td><td class=line>                    <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>184</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>185</td><td class=line>                <span style='color: #af8700'>GenericEnumInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> lhs_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> lhs_args<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>186</td><td class=line>                    <span style='color: #5f00d7'>match</span> rhs <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>187</td><td class=line>                        <span style='color: #af8700'>GenericEnumInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> rhs_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> rhs_args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>188</td><td class=line>                            <span style='color: #5f00d7'>if</span> lhs_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> lhs_args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> == rhs_args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>189</td><td class=line>                                <span style='color: #5f00d7'>mut</span> idx = <span style='font-weight: bold;color: #875f00'>0uz</span>
</td></tr>
<tr><td class=line-number>190</td><td class=line>
</td></tr>
<tr><td class=line-number>191</td><td class=line>                                <span style='color: #5f00d7'>while</span> idx &lt; lhs_args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>192</td><td class=line>                                    <span style='color: #5f00d7'>if</span> lhs_args<span style='color: #4e4e4e'>[</span>idx<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_args<span style='color: #4e4e4e'>[</span>idx<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>193</td><td class=line>                                        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>194</td><td class=line>                                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>195</td><td class=line>                                    idx++
</td></tr>
<tr><td class=line-number>196</td><td class=line>                                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>197</td><td class=line>                                <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>198</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>199</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>200</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>201</td><td class=line>                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>202</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>203</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>204</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>205</td><td class=line>                    <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>206</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>207</td><td class=line>                <span style='color: #af8700'>Struct</span><span style='color: #4e4e4e'>(</span>lhs_id<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>208</td><td class=line>                    <span style='color: #5f00d7'>match</span> rhs <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>209</td><td class=line>                        <span style='color: #af8700'>Struct</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>210</td><td class=line>                            <span style='color: #5f00d7'>return</span> lhs_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>211</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>212</td><td class=line>                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>213</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>214</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>215</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>216</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>217</td><td class=line>                <span style='color: #af8700'>Enum</span><span style='color: #4e4e4e'>(</span>lhs_id<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>218</td><td class=line>                    <span style='color: #5f00d7'>match</span> rhs <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>219</td><td class=line>                        <span style='color: #af8700'>Enum</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>220</td><td class=line>                            <span style='color: #5f00d7'>return</span> lhs_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>221</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>222</td><td class=line>                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>223</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>224</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>225</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>226</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>227</td><td class=line>                <span style='color: #af8700'>Inference</span><span style='color: #4e4e4e'>(</span>lhs_id<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>228</td><td class=line>                    <span style='color: #5f00d7'>match</span> rhs <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>229</td><td class=line>                        <span style='color: #af8700'>Inference</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>230</td><td class=line>                            <span style='color: #5f00d7'>return</span> lhs_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>231</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>232</td><td class=line>                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>233</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>234</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>235</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>236</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>237</td><td class=line>                <span style='color: #af8700'>RawPtr</span><span style='color: #4e4e4e'>(</span>lhs_id<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>238</td><td class=line>                    <span style='color: #5f00d7'>match</span> rhs <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>239</td><td class=line>                        <span style='color: #af8700'>RawPtr</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>240</td><td class=line>                            <span style='color: #5f00d7'>return</span> lhs_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>241</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>242</td><td class=line>                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>243</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>244</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>245</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>246</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>247</td><td class=line>                else =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>248</td><td class=line>                    <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>249</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>250</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>251</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>252</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>253</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>254</td><td class=line>
</td></tr>
<tr><td class=line-number>255</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_builtin</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> <span style='font-weight: bold;'>this</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>256</td><td class=line>        <span style='color: #af8700'>Void</span> | <span style='color: #af8700'>Bool</span> | <span style='color: #af8700'>U8</span> | <span style='color: #af8700'>U16</span> | <span style='color: #af8700'>U32</span> | <span style='color: #af8700'>U64</span> | <span style='color: #af8700'>I8</span> | <span style='color: #af8700'>I16</span> | <span style='color: #af8700'>I32</span> | <span style='color: #af8700'>I64</span> | <span style='color: #af8700'>F32</span> | <span style='color: #af8700'>F64</span> | <span style='color: #af8700'>Usize</span> | <span style='color: #af8700'>JaktString</span> | <span style='color: #af8700'>CChar</span> | <span style='color: #af8700'>CInt</span> | <span style='color: #af8700'>CString</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> true
</td></tr>
<tr><td class=line-number>257</td><td class=line>        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> false
</td></tr>
<tr><td class=line-number>258</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>259</td><td class=line>
</td></tr>
<tr><td class=line-number>260</td><td class=line>    <span style='color: #5f00d7'>function</span> get_bits<span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>i64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> <span style='font-weight: bold;'>this</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>261</td><td class=line>        <span style='color: #af8700'>U8</span> | <span style='color: #af8700'>I8</span> | <span style='color: #af8700'>CChar</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>8</span>
</td></tr>
<tr><td class=line-number>262</td><td class=line>        <span style='color: #af8700'>U16</span> | <span style='color: #af8700'>I16</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>16</span>
</td></tr>
<tr><td class=line-number>263</td><td class=line>        <span style='color: #af8700'>U32</span> | <span style='color: #af8700'>I32</span> | <span style='color: #af8700'>CInt</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>32</span>
</td></tr>
<tr><td class=line-number>264</td><td class=line>        <span style='color: #af8700'>U64</span> | <span style='color: #af8700'>I64</span> | <span style='color: #af8700'>Usize</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>64</span>
</td></tr>
<tr><td class=line-number>265</td><td class=line>        <span style='color: #af8700'>F32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>32</span>
</td></tr>
<tr><td class=line-number>266</td><td class=line>        <span style='color: #af8700'>F64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>64</span>
</td></tr>
<tr><td class=line-number>267</td><td class=line>        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>268</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>269</td><td class=line>
</td></tr>
<tr><td class=line-number>270</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_signed</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> <span style='font-weight: bold;'>this</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>271</td><td class=line>        <span style='color: #af8700'>I8</span> | <span style='color: #af8700'>I16</span> | <span style='color: #af8700'>I32</span> | <span style='color: #af8700'>I64</span> | <span style='color: #af8700'>CChar</span> | <span style='color: #af8700'>CInt</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>272</td><td class=line>        <span style='color: #af8700'>U8</span> | <span style='color: #af8700'>U16</span> | <span style='color: #af8700'>U32</span> | <span style='color: #af8700'>U64</span> | <span style='color: #af8700'>Usize</span> =&gt; <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>273</td><td class=line>        <span style='color: #af8700'>F32</span> | <span style='color: #af8700'>F64</span> =&gt; <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>274</td><td class=line>        else =&gt; <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>275</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>276</td><td class=line>
</td></tr>
<tr><td class=line-number>277</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>min</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>i64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> <span style='font-weight: bold;'>this</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>278</td><td class=line>        <span style='color: #af8700'>CChar</span> =&gt; -<span style='font-weight: bold;color: #875f00'>128</span>
</td></tr>
<tr><td class=line-number>279</td><td class=line>        <span style='color: #af8700'>CInt</span> =&gt; -<span style='font-weight: bold;color: #875f00'>2147483648</span>
</td></tr>
<tr><td class=line-number>280</td><td class=line>        <span style='color: #af8700'>I8</span> =&gt; -<span style='font-weight: bold;color: #875f00'>128</span>
</td></tr>
<tr><td class=line-number>281</td><td class=line>        <span style='color: #af8700'>I16</span> =&gt; -<span style='font-weight: bold;color: #875f00'>32768</span>
</td></tr>
<tr><td class=line-number>282</td><td class=line>        <span style='color: #af8700'>I32</span> =&gt; -<span style='font-weight: bold;color: #875f00'>2147483648</span>
</td></tr>
<tr><td class=line-number>283</td><td class=line>        <span style='color: #af8700'>I64</span> =&gt; -<span style='font-weight: bold;color: #875f00'>9223372036854775807</span> - <span style='font-weight: bold;color: #875f00'>1</span>
</td></tr>
<tr><td class=line-number>284</td><td class=line>        <span style='color: #af8700'>U8</span> | <span style='color: #af8700'>U16</span> | <span style='color: #af8700'>U32</span> | <span style='color: #af8700'>U64</span> | <span style='color: #af8700'>Usize</span> =&gt; <span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>285</td><td class=line>        else =&gt; <span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>286</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>287</td><td class=line>
</td></tr>
<tr><td class=line-number>288</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>max</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>u64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> <span style='font-weight: bold;'>this</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>289</td><td class=line>        <span style='color: #af8700'>CChar</span> =&gt; <span style='font-weight: bold;color: #875f00'>127u64</span>
</td></tr>
<tr><td class=line-number>290</td><td class=line>        <span style='color: #af8700'>CInt</span> =&gt; <span style='font-weight: bold;color: #875f00'>2147483647u64</span>
</td></tr>
<tr><td class=line-number>291</td><td class=line>        <span style='color: #af8700'>I8</span> =&gt; <span style='font-weight: bold;color: #875f00'>127u64</span>
</td></tr>
<tr><td class=line-number>292</td><td class=line>        <span style='color: #af8700'>I16</span> =&gt; <span style='font-weight: bold;color: #875f00'>32767u64</span>
</td></tr>
<tr><td class=line-number>293</td><td class=line>        <span style='color: #af8700'>I32</span> =&gt; <span style='font-weight: bold;color: #875f00'>2147483647u64</span>
</td></tr>
<tr><td class=line-number>294</td><td class=line>        <span style='color: #af8700'>I64</span> =&gt; <span style='font-weight: bold;color: #875f00'>9223372036854775807u64</span>
</td></tr>
<tr><td class=line-number>295</td><td class=line>        <span style='color: #af8700'>U8</span> =&gt; <span style='font-weight: bold;color: #875f00'>255u64</span>
</td></tr>
<tr><td class=line-number>296</td><td class=line>        <span style='color: #af8700'>U16</span> =&gt; <span style='font-weight: bold;color: #875f00'>65535u64</span>
</td></tr>
<tr><td class=line-number>297</td><td class=line>        <span style='color: #af8700'>U32</span> =&gt; <span style='font-weight: bold;color: #875f00'>4294967295u64</span>
</td></tr>
<tr><td class=line-number>298</td><td class=line>        <span style='color: #af8700'>U64</span> =&gt; <span style='font-weight: bold;color: #875f00'>18446744073709551615u64</span>
</td></tr>
<tr><td class=line-number>299</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// FIXME: Don&#39;t assume that usize is 64-bit</span>
</td></tr>
<tr><td class=line-number>300</td><td class=line>        <span style='color: #af8700'>Usize</span> =&gt; <span style='font-weight: bold;color: #875f00'>18446744073709551615u64</span>
</td></tr>
<tr><td class=line-number>301</td><td class=line>        else =&gt; <span style='font-weight: bold;color: #875f00'>0u64</span>
</td></tr>
<tr><td class=line-number>302</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>303</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>304</td><td class=line>
</td></tr>
<tr><td class=line-number>305</td><td class=line><span style='color: #5f00d7'>class</span> <span style='color: #005f5f'>Scope</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>306</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>namespace_name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='font-weight: bold;color: #4e4e4e'>?</span>
</td></tr>
<tr><td class=line-number>307</td><td class=line>    <span style='color: #af0000'>public</span> vars<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>VarId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>308</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>structs</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>StructId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>309</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>functions</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>310</td><td class=line>    <span style='color: #af0000'>public</span> enums<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>EnumId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>311</td><td class=line>    <span style='color: #af0000'>public</span> types<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>312</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>imports</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>(</span><span style='color: #005f5f'>ModuleId</span><span style='color: #4e4e4e'>,</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>313</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>parent</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='font-weight: bold;color: #4e4e4e'>?</span>
</td></tr>
<tr><td class=line-number>314</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>children</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>315</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>can_throw</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>316</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>317</td><td class=line>
</td></tr>
<tr><td class=line-number>318</td><td class=line><span style='color: #5f00d7'>class</span> <span style='color: #005f5f'>Module</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>319</td><td class=line>    <span style='color: #af0000'>public</span> id<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span>
</td></tr>
<tr><td class=line-number>320</td><td class=line>    <span style='color: #af0000'>public</span> name<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span>
</td></tr>
<tr><td class=line-number>321</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>functions</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedFunction</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>322</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>structures</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedStruct</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>323</td><td class=line>    <span style='color: #af0000'>public</span> enums<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedEnum</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>324</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>scopes</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>Scope</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>325</td><td class=line>    <span style='color: #af0000'>public</span> types<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>Type</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>326</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>variables</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedVariable</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>327</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>imports</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>ModuleId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>328</td><td class=line>
</td></tr>
<tr><td class=line-number>329</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>is_root</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>330</td><td class=line>
</td></tr>
<tr><td class=line-number>331</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>new_type_variable</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>TypeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>332</td><td class=line>        <span style='color: #5f00d7'>let</span> new_id = <span style='color: #4e4e4e'>.</span>types<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>333</td><td class=line>
</td></tr>
<tr><td class=line-number>334</td><td class=line>        <span style='color: #4e4e4e'>.</span>types<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>TypeVariable</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;T{}&quot;</span><span style='color: #4e4e4e'>,</span> new_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>335</td><td class=line>
</td></tr>
<tr><td class=line-number>336</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> new_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>337</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>338</td><td class=line>
</td></tr>
<tr><td class=line-number>339</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>add_function</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>checked_function</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedFunction</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>FunctionId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>340</td><td class=line>        <span style='color: #5f00d7'>let</span> new_id = <span style='color: #4e4e4e'>.</span>functions<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>341</td><td class=line>
</td></tr>
<tr><td class=line-number>342</td><td class=line>        <span style='color: #4e4e4e'>.</span>functions<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>checked_function<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>343</td><td class=line>
</td></tr>
<tr><td class=line-number>344</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>FunctionId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> new_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>345</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>346</td><td class=line>
</td></tr>
<tr><td class=line-number>347</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>add_variable</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>checked_variable</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedVariable</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>VarId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>348</td><td class=line>        <span style='color: #5f00d7'>let</span> new_id = <span style='color: #4e4e4e'>.</span>variables<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>349</td><td class=line>
</td></tr>
<tr><td class=line-number>350</td><td class=line>        <span style='color: #4e4e4e'>.</span>variables<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>checked_variable<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>351</td><td class=line>
</td></tr>
<tr><td class=line-number>352</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>VarId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> new_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>353</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>354</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>355</td><td class=line>
</td></tr>
<tr><td class=line-number>356</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>CheckedNamespace</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>357</td><td class=line>    <span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span>
</td></tr>
<tr><td class=line-number>358</td><td class=line>    <span style='color: #af0000'>scope</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span>
</td></tr>
<tr><td class=line-number>359</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>360</td><td class=line>
</td></tr>
<tr><td class=line-number>361</td><td class=line><span style='color: #5f00d7'>class</span> <span style='color: #005f5f'>CheckedFunction</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>362</td><td class=line>    <span style='color: #af0000'>public</span> name<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span>
</td></tr>
<tr><td class=line-number>363</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>return_type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span>
</td></tr>
<tr><td class=line-number>364</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>params</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedParameter</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>365</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>generic_params</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>FunctionGenericParameter</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>366</td><td class=line>    <span style='color: #af0000'>public</span> block<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedBlock</span>
</td></tr>
<tr><td class=line-number>367</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>can_throw</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>368</td><td class=line>    <span style='color: #af0000'>public</span> type<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionType</span>
</td></tr>
<tr><td class=line-number>369</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>linkage</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionLinkage</span>
</td></tr>
<tr><td class=line-number>370</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>function_scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span>
</td></tr>
<tr><td class=line-number>371</td><td class=line>
</td></tr>
<tr><td class=line-number>372</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_static</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>373</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #4e4e4e'>.</span>params<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> &lt; <span style='font-weight: bold;color: #875f00'>1</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>374</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>375</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>376</td><td class=line>
</td></tr>
<tr><td class=line-number>377</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>params<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span> != <span style='color: #008700'>&quot;this&quot;</span>
</td></tr>
<tr><td class=line-number>378</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>379</td><td class=line>
</td></tr>
<tr><td class=line-number>380</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_mutating</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>381</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #4e4e4e'>.</span>params<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> &lt; <span style='font-weight: bold;color: #875f00'>1</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>382</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>383</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>384</td><td class=line>
</td></tr>
<tr><td class=line-number>385</td><td class=line>        <span style='color: #5f00d7'>let</span> first_param_variable = <span style='color: #4e4e4e'>.</span>params<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span>
</td></tr>
<tr><td class=line-number>386</td><td class=line>
</td></tr>
<tr><td class=line-number>387</td><td class=line>        <span style='color: #5f00d7'>return</span> first_param_variable<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span> == <span style='color: #008700'>&quot;this&quot;</span> <span style='color: #5f00d7'>and</span> first_param_variable<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>is_mutable</span>
</td></tr>
<tr><td class=line-number>388</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>389</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>390</td><td class=line>
</td></tr>
<tr><td class=line-number>391</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>CheckedParameter</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>392</td><td class=line>    <span style='color: #af0000'>requires_label</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>393</td><td class=line>    <span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedVariable</span>
</td></tr>
<tr><td class=line-number>394</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>395</td><td class=line>
</td></tr>
<tr><td class=line-number>396</td><td class=line><span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>FunctionGenericParameter</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>397</td><td class=line>    <span style='color: #af8700'>InferenceGuide</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>398</td><td class=line>    <span style='color: #af8700'>Parameter</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>399</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>400</td><td class=line>
</td></tr>
<tr><td class=line-number>401</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>CheckedVariable</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>402</td><td class=line>    <span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span>
</td></tr>
<tr><td class=line-number>403</td><td class=line>    <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span>
</td></tr>
<tr><td class=line-number>404</td><td class=line>    <span style='color: #af0000'>is_mutable</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>405</td><td class=line>    <span style='color: #af0000'>definition_span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span>
</td></tr>
<tr><td class=line-number>406</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>407</td><td class=line>
</td></tr>
<tr><td class=line-number>408</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>CheckedVarDecl</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>409</td><td class=line>    <span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span>
</td></tr>
<tr><td class=line-number>410</td><td class=line>    <span style='color: #af0000'>is_mutable</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>411</td><td class=line>    <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span>
</td></tr>
<tr><td class=line-number>412</td><td class=line>    <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span>
</td></tr>
<tr><td class=line-number>413</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>414</td><td class=line>
</td></tr>
<tr><td class=line-number>415</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>CheckedBlock</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>416</td><td class=line>    <span style='color: #af0000'>statements</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedStatement</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>417</td><td class=line>    <span style='color: #af0000'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span>
</td></tr>
<tr><td class=line-number>418</td><td class=line>    <span style='color: #af0000'>definitely_returns</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>419</td><td class=line>    <span style='color: #af0000'>yielded_type</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='font-weight: bold;color: #4e4e4e'>?</span>
</td></tr>
<tr><td class=line-number>420</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>421</td><td class=line>
</td></tr>
<tr><td class=line-number>422</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>CheckedStruct</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>423</td><td class=line>    <span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span>
</td></tr>
<tr><td class=line-number>424</td><td class=line>    <span style='color: #af0000'>name_span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span>
</td></tr>
<tr><td class=line-number>425</td><td class=line>    <span style='color: #af0000'>generic_parameters</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>426</td><td class=line>    <span style='color: #af0000'>fields</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>VarId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>427</td><td class=line>    <span style='color: #af0000'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span>
</td></tr>
<tr><td class=line-number>428</td><td class=line>    <span style='color: #af0000'>definition_linkage</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>DefinitionLinkage</span>
</td></tr>
<tr><td class=line-number>429</td><td class=line>    <span style='color: #af0000'>record_type</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>RecordType</span>
</td></tr>
<tr><td class=line-number>430</td><td class=line>    <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span>
</td></tr>
<tr><td class=line-number>431</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>432</td><td class=line>
</td></tr>
<tr><td class=line-number>433</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>CheckedEnum</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>434</td><td class=line>    <span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span>
</td></tr>
<tr><td class=line-number>435</td><td class=line>    <span style='color: #af0000'>name_span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span>
</td></tr>
<tr><td class=line-number>436</td><td class=line>    <span style='color: #af0000'>generic_parameters</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>437</td><td class=line>    <span style='color: #af0000'>variants</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedEnumVariant</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>438</td><td class=line>    <span style='color: #af0000'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span>
</td></tr>
<tr><td class=line-number>439</td><td class=line>    <span style='color: #af0000'>definition_linkage</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>DefinitionLinkage</span>
</td></tr>
<tr><td class=line-number>440</td><td class=line>    <span style='color: #af0000'>record_type</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>RecordType</span>
</td></tr>
<tr><td class=line-number>441</td><td class=line>    <span style='color: #af0000'>underlying_type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span>
</td></tr>
<tr><td class=line-number>442</td><td class=line>    <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span>
</td></tr>
<tr><td class=line-number>443</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>444</td><td class=line>
</td></tr>
<tr><td class=line-number>445</td><td class=line><span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>CheckedEnumVariant</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>446</td><td class=line>    <span style='color: #af8700'>Untyped</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>447</td><td class=line>    <span style='color: #af8700'>Typed</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>448</td><td class=line>    <span style='color: #af8700'>WithValue</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>449</td><td class=line>    <span style='color: #af8700'>StructLike</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>fields</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>VarId</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>450</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>451</td><td class=line>
</td></tr>
<tr><td class=line-number>452</td><td class=line><span style='color: #5f00d7'>boxed</span> <span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>453</td><td class=line>    <span style='color: #af8700'>Expression</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>CheckedExpression</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>454</td><td class=line>    <span style='color: #af8700'>Defer</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>CheckedStatement</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>455</td><td class=line>    <span style='color: #af8700'>VarDecl</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>var_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>VarId</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>init</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>456</td><td class=line>    <span style='color: #af8700'>If</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>guard</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>then_block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedBlock</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>else_statement</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedStatement</span><span style='font-weight: bold;color: #4e4e4e'>?</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>457</td><td class=line>    <span style='color: #af8700'>Block</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>CheckedBlock</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>458</td><td class=line>    <span style='color: #af8700'>Loop</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>CheckedBlock</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>459</td><td class=line>    <span style='color: #af8700'>While</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>guard</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedBlock</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>460</td><td class=line>    <span style='color: #af8700'>Return</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>CheckedExpression</span><span style='font-weight: bold;color: #4e4e4e'>?</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>461</td><td class=line>    <span style='color: #af8700'>Break</span>
</td></tr>
<tr><td class=line-number>462</td><td class=line>    <span style='color: #af8700'>Continue</span>
</td></tr>
<tr><td class=line-number>463</td><td class=line>    <span style='color: #af8700'>Throw</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>CheckedExpression</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>464</td><td class=line>    <span style='color: #af8700'>Yield</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>CheckedExpression</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>465</td><td class=line>    <span style='color: #af8700'>Try</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>stmt</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedStatement</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>error_name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>catch_block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedBlock</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>466</td><td class=line>    <span style='color: #af8700'>InlineCpp</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>467</td><td class=line>    <span style='color: #af8700'>Garbage</span>
</td></tr>
<tr><td class=line-number>468</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>469</td><td class=line>
</td></tr>
<tr><td class=line-number>470</td><td class=line><span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>NumberConstant</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>471</td><td class=line>    <span style='color: #af8700'>Signed</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>i64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>472</td><td class=line>    <span style='color: #af8700'>Unsigned</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>473</td><td class=line>    <span style='color: #af8700'>Floating</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>f64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>474</td><td class=line>
</td></tr>
<tr><td class=line-number>475</td><td class=line>    function can_fit_number<span style='color: #4e4e4e'>(</span><span style='color: #af0000'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>program</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedProgram</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>476</td><td class=line>        <span style='color: #af0000'>let</span> type_ = program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_type</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>477</td><td class=line>
</td></tr>
<tr><td class=line-number>478</td><td class=line>        return match this <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>479</td><td class=line>            <span style='color: #af0000'>Signed</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> type_ <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>480</td><td class=line>                <span style='color: #af0000'>I64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> true
</td></tr>
<tr><td class=line-number>481</td><td class=line>                <span style='color: #af0000'>U64</span> | <span style='color: #af0000'>Usize</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af0000'>value</span> &gt;= <span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>482</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af0000'>program</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>is_integer</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> <span style='color: #af0000'>value</span> &gt;= <span style='color: #af0000'>type_</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>min</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> and value &lt;= <span style='color: #4e4e4e'>(</span><span style='color: #af0000'>type_</span><span style='color: #4e4e4e'>.</span>max<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> as<span style='font-weight: bold;color: #4e4e4e'>!</span> <span style='font-weight: bold;color: #005f5f'>i64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>483</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>484</td><td class=line>            <span style='color: #af8700'>Unsigned</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #5f00d7'>match</span> type_ <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>485</td><td class=line>                <span style='color: #af8700'>U64</span> | <span style='color: #af8700'>Usize</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>486</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_integer</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> value &lt;= type_<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>max</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>487</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>488</td><td class=line>            <span style='color: #af8700'>Floating</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #5f00d7'>match</span> type_ <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>489</td><td class=line>                <span style='color: #af8700'>F32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>490</td><td class=line>                    <span style='color: #005fd7'>todo</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Implement casting f32 to f64&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>491</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>492</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>493</td><td class=line>                <span style='color: #af8700'>F64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>494</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>495</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>496</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>497</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>498</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>499</td><td class=line><span style='font-style: italic;color: #8a8a8a'>// FIXME: Make this a member function of NumberConstant.</span>
</td></tr>
<tr><td class=line-number>500</td><td class=line><span style='font-style: italic;color: #8a8a8a'>//        Right now we cannot do that as the compiler does not know the CheckedNumericConstant</span>
</td></tr>
<tr><td class=line-number>501</td><td class=line><span style='font-style: italic;color: #8a8a8a'>//        constructors when we use them in a member function (https://github.com/SerenityOS/jakt/issues/677).</span>
</td></tr>
<tr><td class=line-number>502</td><td class=line><span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>promote</span><span style='color: #4e4e4e'>(</span><span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>num_const</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>NumberConstant</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>program</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedProgram</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>CheckedNumericConstant</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>503</td><td class=line>    <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> num_const<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>can_fit_number</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>,</span> program<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>504</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>505</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>506</td><td class=line>
</td></tr>
<tr><td class=line-number>507</td><td class=line>    <span style='color: #5f00d7'>let</span> bits = program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_bits</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>508</td><td class=line>    <span style='color: #5f00d7'>let</span> is_signed = program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_signed</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>509</td><td class=line>    <span style='color: #5f00d7'>let</span> new_constant = <span style='color: #5f00d7'>match</span> num_const <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>510</td><td class=line>        <span style='color: #af8700'>Signed</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> is_signed <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>511</td><td class=line>            <span style='font-weight: bold;color: #875f00'>false</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> bits <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>512</td><td class=line>                <span style='font-weight: bold;color: #875f00'>8</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U8</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>513</td><td class=line>                <span style='font-weight: bold;color: #875f00'>16</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U16</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u16</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>514</td><td class=line>                <span style='font-weight: bold;color: #875f00'>32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U32</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>515</td><td class=line>                <span style='font-weight: bold;color: #875f00'>64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U64</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>516</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>517</td><td class=line>                    <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Numeric constants can only be 8, 16, 32, or 64 bits long&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>518</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>519</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>520</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>521</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> bits <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>522</td><td class=line>                <span style='font-weight: bold;color: #875f00'>8</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I8</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>523</td><td class=line>                <span style='font-weight: bold;color: #875f00'>16</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I16</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i16</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>524</td><td class=line>                <span style='font-weight: bold;color: #875f00'>32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I32</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>525</td><td class=line>                <span style='font-weight: bold;color: #875f00'>64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>526</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>527</td><td class=line>                    <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Numeric constants can only be 8, 16, 32, or 64 bits long&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>528</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>529</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>530</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>531</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>532</td><td class=line>        <span style='color: #af8700'>Unsigned</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> is_signed <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>533</td><td class=line>            <span style='font-weight: bold;color: #875f00'>false</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> bits <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>534</td><td class=line>                <span style='font-weight: bold;color: #875f00'>8</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U8</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>535</td><td class=line>                <span style='font-weight: bold;color: #875f00'>16</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U16</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u16</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>536</td><td class=line>                <span style='font-weight: bold;color: #875f00'>32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U32</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>537</td><td class=line>                <span style='font-weight: bold;color: #875f00'>64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U64</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>538</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>539</td><td class=line>                    <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Numeric constants can only be 8, 16, 32, or 64 bits long&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>540</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>541</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>542</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>543</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> bits <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>544</td><td class=line>                <span style='font-weight: bold;color: #875f00'>8</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I8</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>545</td><td class=line>                <span style='font-weight: bold;color: #875f00'>16</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I16</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i16</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>546</td><td class=line>                <span style='font-weight: bold;color: #875f00'>32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I32</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>547</td><td class=line>                <span style='font-weight: bold;color: #875f00'>64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>548</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>549</td><td class=line>                    <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Numeric constants can only be 8, 16, 32, or 64 bits long&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>550</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>551</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>552</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>553</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>554</td><td class=line>        <span style='color: #af8700'>Floating</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> is_signed <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>555</td><td class=line>            <span style='font-weight: bold;color: #875f00'>true</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> bits <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>556</td><td class=line>                <span style='font-weight: bold;color: #875f00'>32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>557</td><td class=line>                    <span style='color: #005fd7'>todo</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Add conversion from f64 to f32&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>558</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>559</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>560</td><td class=line>                <span style='font-weight: bold;color: #875f00'>64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>F64</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>561</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>562</td><td class=line>                    <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Floating numeric constants can only be 8, 16, 32, or 64 bits long&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>563</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>564</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>565</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>566</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>567</td><td class=line>                <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Floating numeric constant cannot be unsigned&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>568</td><td class=line>                <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>569</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>570</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>571</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>572</td><td class=line>
</td></tr>
<tr><td class=line-number>573</td><td class=line>    <span style='color: #5f00d7'>return</span> new_constant
</td></tr>
<tr><td class=line-number>574</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>575</td><td class=line>
</td></tr>
<tr><td class=line-number>576</td><td class=line><span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>CheckedNumericConstant</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>577</td><td class=line>    <span style='color: #af8700'>I8</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>i8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>578</td><td class=line>    <span style='color: #af8700'>I16</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>i16</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>579</td><td class=line>    <span style='color: #af8700'>I32</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>i32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>580</td><td class=line>    <span style='color: #af8700'>I64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>i64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>581</td><td class=line>    <span style='color: #af8700'>U8</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>u8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>582</td><td class=line>    <span style='color: #af8700'>U16</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>u16</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>583</td><td class=line>    <span style='color: #af8700'>U32</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>u32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>584</td><td class=line>    <span style='color: #af8700'>U64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>585</td><td class=line>    <span style='color: #af8700'>USize</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>586</td><td class=line>    <span style='color: #af8700'>F32</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>f32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>587</td><td class=line>    <span style='color: #af8700'>F64</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>f64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>588</td><td class=line>
</td></tr>
<tr><td class=line-number>589</td><td class=line>    <span style='font-style: italic;color: #8a8a8a'>// FIXME: make this into a FAMF (fat arrow match function) once we can yield `None` out of the match (https://github.com/SerenityOS/jakt/issues/669)</span>
</td></tr>
<tr><td class=line-number>590</td><td class=line>    <span style='font-style: italic;color: #8a8a8a'>//          or once we can cast f32 to f64</span>
</td></tr>
<tr><td class=line-number>591</td><td class=line>    function number_constant<span style='color: #4e4e4e'>(</span><span style='color: #af0000'>this</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #af0000'>NumberConstant</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>592</td><td class=line>        <span style='color: #af0000'>match</span> this <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>593</td><td class=line>            <span style='color: #af0000'>I8</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>value</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span> <span style='color: #af0000'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af8700'>Signed</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>value</span> <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>594</td><td class=line>            <span style='color: #af8700'>I16</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Signed</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>595</td><td class=line>            <span style='color: #af8700'>I32</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Signed</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>596</td><td class=line>            <span style='color: #af8700'>I64</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Signed</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>i64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>597</td><td class=line>            <span style='color: #af8700'>U8</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Unsigned</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>598</td><td class=line>            <span style='color: #af8700'>U16</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Unsigned</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>599</td><td class=line>            <span style='color: #af8700'>U32</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Unsigned</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>600</td><td class=line>            <span style='color: #af8700'>U64</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Unsigned</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>601</td><td class=line>            <span style='color: #af8700'>USize</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Unsigned</span><span style='color: #4e4e4e'>(</span>value <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>u64</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>602</td><td class=line>
</td></tr>
<tr><td class=line-number>603</td><td class=line>            <span style='font-style: italic;color: #8a8a8a'>// FIXME: add a case for F32 once we can cast f32 to f64</span>
</td></tr>
<tr><td class=line-number>604</td><td class=line>
</td></tr>
<tr><td class=line-number>605</td><td class=line>            <span style='color: #af8700'>F64</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>NumberConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Floating</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>606</td><td class=line>            else =&gt; <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>607</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>608</td><td class=line>
</td></tr>
<tr><td class=line-number>609</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>610</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>611</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>612</td><td class=line>
</td></tr>
<tr><td class=line-number>613</td><td class=line><span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>CheckedTypeCast</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>614</td><td class=line>    <span style='color: #af8700'>Fallible</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>615</td><td class=line>    <span style='color: #af8700'>Infallible</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>616</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>617</td><td class=line>
</td></tr>
<tr><td class=line-number>618</td><td class=line><span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>CheckedUnaryOperator</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>619</td><td class=line>    <span style='color: #af8700'>PreIncrement</span>
</td></tr>
<tr><td class=line-number>620</td><td class=line>    <span style='color: #af8700'>PostIncrement</span>
</td></tr>
<tr><td class=line-number>621</td><td class=line>    <span style='color: #af8700'>PreDecrement</span>
</td></tr>
<tr><td class=line-number>622</td><td class=line>    <span style='color: #af8700'>PostDecrement</span>
</td></tr>
<tr><td class=line-number>623</td><td class=line>    <span style='color: #af8700'>Negate</span>
</td></tr>
<tr><td class=line-number>624</td><td class=line>    <span style='color: #af8700'>Dereference</span>
</td></tr>
<tr><td class=line-number>625</td><td class=line>    <span style='color: #af8700'>RawAddress</span>
</td></tr>
<tr><td class=line-number>626</td><td class=line>    <span style='color: #af8700'>LogicalNot</span>
</td></tr>
<tr><td class=line-number>627</td><td class=line>    <span style='color: #af8700'>BitwiseNot</span>
</td></tr>
<tr><td class=line-number>628</td><td class=line>    <span style='color: #af8700'>TypeCast</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>CheckedTypeCast</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>629</td><td class=line>    <span style='color: #af8700'>Is</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>630</td><td class=line>    <span style='color: #af8700'>IsEnumVariant</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>631</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>632</td><td class=line>
</td></tr>
<tr><td class=line-number>633</td><td class=line><span style='color: #5f00d7'>boxed</span> <span style='color: #5f00d7'>enum</span> <span style='color: #005f5f'>CheckedExpression</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>634</td><td class=line>    <span style='color: #af8700'>Boolean</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>val</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>635</td><td class=line>    <span style='color: #af8700'>NumericConstant</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>val</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedNumericConstant</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>636</td><td class=line>    <span style='color: #af8700'>QuotedString</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>val</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>637</td><td class=line>    <span style='color: #af8700'>ByteConstant</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>val</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>638</td><td class=line>    <span style='color: #af8700'>CharacterConstant</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>val</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>639</td><td class=line>    <span style='color: #af8700'>UnaryOp</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>op</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedUnaryOperator</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>640</td><td class=line>    <span style='color: #af8700'>BinaryOp</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>lhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>op</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>BinaryOperator</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>641</td><td class=line>    <span style='color: #af8700'>JaktTuple</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>vals</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>642</td><td class=line>    <span style='color: #af8700'>Range</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>from</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>to</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>643</td><td class=line>    <span style='color: #af8700'>JaktArray</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>vals</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>repeat</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='font-weight: bold;color: #4e4e4e'>?</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>644</td><td class=line>    <span style='color: #af8700'>JaktDictionary</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>vals</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>(</span><span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>645</td><td class=line>    <span style='color: #af8700'>JaktSet</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>vals</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>646</td><td class=line>    <span style='color: #af8700'>IndexedExpression</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>index</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>647</td><td class=line>    <span style='color: #af8700'>IndexedDictionary</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>index</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>648</td><td class=line>    <span style='color: #af8700'>IndexedTuple</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>index</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>usize</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>649</td><td class=line>    <span style='color: #af8700'>IndexedStruct</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>index</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>650</td><td class=line>    <span style='color: #af8700'>Call</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>call</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedCall</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>651</td><td class=line>    <span style='color: #af8700'>MethodCall</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>call</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedCall</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>652</td><td class=line>    <span style='color: #af8700'>NamespacedVar</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>namespaces</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedNamespace</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>var</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedVariable</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>653</td><td class=line>    <span style='color: #af8700'>Var</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>var</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedVariable</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>654</td><td class=line>    <span style='color: #af8700'>OptionalNone</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>655</td><td class=line>    <span style='color: #af8700'>OptionalSome</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>656</td><td class=line>    <span style='color: #af8700'>ForcedUnwrap</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>657</td><td class=line>    <span style='color: #af8700'>Block</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedBlock</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>658</td><td class=line>    <span style='color: #af8700'>Garbage</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>Span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>659</td><td class=line>
</td></tr>
<tr><td class=line-number>660</td><td class=line>    <span style='font-style: italic;color: #8a8a8a'>// FIXME: rewrite this into a FAMF once we can yield None out of a match (https://github.com/SerenityOS/jakt/issues/669)</span>
</td></tr>
<tr><td class=line-number>661</td><td class=line>    function to_number_constant<span style='color: #4e4e4e'>(</span><span style='color: #af0000'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>program</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedProgram</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #af8700'>NumberConstant</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>662</td><td class=line>        <span style='color: #af0000'>match</span> this <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>663</td><td class=line>            <span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span><span style='color: #af0000'>val</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>span</span><span style='color: #4e4e4e'>,</span> <span style='color: #af0000'>type_id</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span> <span style='color: #af0000'>return</span> val<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>number_constant</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>664</td><td class=line>            <span style='color: #af8700'>UnaryOp</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> op<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>)</span> =&gt; <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>665</td><td class=line>                <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_integer</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> <span style='color: #5f00d7'>not</span> program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_floating</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>666</td><td class=line>                    <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>667</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>668</td><td class=line>                <span style='color: #5f00d7'>match</span> expr <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>669</td><td class=line>                    <span style='color: #af8700'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>:</span> span_<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> type_id_<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span> <span style='color: #5f00d7'>return</span> val<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>number_constant</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>670</td><td class=line>                    <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>671</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>672</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>673</td><td class=line>            else =&gt; <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>674</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>675</td><td class=line>
</td></tr>
<tr><td class=line-number>676</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>677</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>678</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>679</td><td class=line>
</td></tr>
<tr><td class=line-number>680</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>ResolvedNamespace</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>681</td><td class=line>    <span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span>
</td></tr>
<tr><td class=line-number>682</td><td class=line>    <span style='color: #af0000'>generic_parameters</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span><span style='font-weight: bold;color: #4e4e4e'>?</span>
</td></tr>
<tr><td class=line-number>683</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>684</td><td class=line>
</td></tr>
<tr><td class=line-number>685</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>CheckedCall</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>686</td><td class=line>    <span style='color: #af0000'>namespace_</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>ResolvedNamespace</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>687</td><td class=line>    <span style='color: #af0000'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>688</td><td class=line>    <span style='color: #af0000'>args</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>689</td><td class=line>    <span style='color: #af0000'>function_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionId</span><span style='font-weight: bold;color: #4e4e4e'>?</span>
</td></tr>
<tr><td class=line-number>690</td><td class=line>    <span style='color: #af0000'>return_type</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span>
</td></tr>
<tr><td class=line-number>691</td><td class=line>    <span style='color: #af0000'>callee_throws</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>692</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>693</td><td class=line>
</td></tr>
<tr><td class=line-number>694</td><td class=line>
</td></tr>
<tr><td class=line-number>695</td><td class=line><span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>builtin</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>BuiltinType</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>TypeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>696</td><td class=line>    <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> builtin <span style='color: #5f00d7'>as!</span> <span style='font-weight: bold;color: #005f5f'>usize</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>697</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>698</td><td class=line>
</td></tr>
<tr><td class=line-number>699</td><td class=line><span style='font-style: italic;color: #8a8a8a'>// This is the &quot;result&quot; object produced by type-checking.</span>
</td></tr>
<tr><td class=line-number>700</td><td class=line><span style='color: #5f00d7'>class</span> <span style='color: #005f5f'>CheckedProgram</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>701</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>Module</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>702</td><td class=line>
</td></tr>
<tr><td class=line-number>703</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_module</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>Module</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>modules<span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>704</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_function</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>CheckedFunction</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>modules<span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>functions</span><span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>705</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_variable</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>VarId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>CheckedVariable</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>modules<span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variables</span><span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>706</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_type</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>Type</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>modules<span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>707</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_enum</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>EnumId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>CheckedEnum</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>modules<span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>enums</span><span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>708</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_struct</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>StructId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>CheckedStruct</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>modules<span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>structures</span><span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>709</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_scope</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>Scope</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>modules<span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>scopes</span><span style='color: #4e4e4e'>[</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>710</td><td class=line>
</td></tr>
<tr><td class=line-number>711</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_integer</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>712</td><td class=line>        <span style='color: #5f00d7'>let</span> type = <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>713</td><td class=line>
</td></tr>
<tr><td class=line-number>714</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>match</span> type <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>715</td><td class=line>            <span style='color: #af8700'>I8</span> | <span style='color: #af8700'>I16</span> | <span style='color: #af8700'>I32</span> | <span style='color: #af8700'>I64</span> | <span style='color: #af8700'>U8</span> | <span style='color: #af8700'>U16</span> | <span style='color: #af8700'>U32</span> | <span style='color: #af8700'>U64</span> | <span style='color: #af8700'>Usize</span> | <span style='color: #af8700'>CInt</span> | <span style='color: #af8700'>CChar</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>716</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>717</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>718</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>719</td><td class=line>
</td></tr>
<tr><td class=line-number>720</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_floating</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>721</td><td class=line>        <span style='color: #5f00d7'>let</span> type = <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>722</td><td class=line>
</td></tr>
<tr><td class=line-number>723</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>match</span> type <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>724</td><td class=line>            <span style='color: #af8700'>F32</span> | <span style='color: #af8700'>F64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>725</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>726</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>727</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>728</td><td class=line>
</td></tr>
<tr><td class=line-number>729</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_numeric</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>730</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>is_integer<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>or</span> <span style='color: #4e4e4e'>.</span>is_floating<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>731</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>732</td><td class=line>
</td></tr>
<tr><td class=line-number>733</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_bits</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_bits</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>734</td><td class=line>
</td></tr>
<tr><td class=line-number>735</td><td class=line>    <span style='color: #af0000'>public</span> <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_signed</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_signed</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>736</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>737</td><td class=line>
</td></tr>
<tr><td class=line-number>738</td><td class=line><span style='color: #5f00d7'>struct</span> <span style='color: #005f5f'>Typechecker</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>739</td><td class=line>    <span style='color: #af0000'>program</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedProgram</span>
</td></tr>
<tr><td class=line-number>740</td><td class=line>    <span style='color: #af0000'>inferences</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>741</td><td class=line>    <span style='color: #af0000'>current_module_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ModuleId</span>
</td></tr>
<tr><td class=line-number>742</td><td class=line>    <span style='color: #af0000'>inside_defer</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span>
</td></tr>
<tr><td class=line-number>743</td><td class=line>    <span style='color: #af0000'>errors</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>JaktError</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>744</td><td class=line>
</td></tr>
<tr><td class=line-number>745</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck</span><span style='color: #4e4e4e'>(</span><span style='text-decoration: underline;'>parsed_namespace</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedNamespace</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>errors</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>JaktError</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedProgram</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>746</td><td class=line>        <span style='color: #5f00d7'>let</span> root_module_id = <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>747</td><td class=line>        <span style='color: #5f00d7'>let</span> module = <span style='color: #af8700'>Module</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>748</td><td class=line>            id<span style='color: #4e4e4e'>:</span> root_module_id<span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>749</td><td class=line>            name<span style='color: #4e4e4e'>:</span> parsed_namespace<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span> ?? <span style='color: #008700'>&quot;Root Module&quot;</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>750</td><td class=line>            functions<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>751</td><td class=line>            structures<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>752</td><td class=line>            enums<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>753</td><td class=line>            scopes<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>754</td><td class=line>            types<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>
</td></tr>
<tr><td class=line-number>755</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Void</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>756</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>757</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U8</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>758</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U16</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>759</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U32</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>760</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U64</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>761</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I8</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>762</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I16</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>763</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I32</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>764</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>765</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>F32</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>766</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>F64</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>767</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Usize</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>768</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>JaktString</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>769</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>CChar</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>770</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>CInt</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>771</td><td class=line>                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>CString</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>772</td><td class=line>            <span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>773</td><td class=line>            variables<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>774</td><td class=line>            imports<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>775</td><td class=line>            is_root<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>true</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>776</td><td class=line>        <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>777</td><td class=line>
</td></tr>
<tr><td class=line-number>778</td><td class=line>        <span style='color: #5f00d7'>mut</span> typechecker = <span style='color: #af8700'>Typechecker</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>779</td><td class=line>            program<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedProgram</span><span style='color: #4e4e4e'>(</span>modules<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>module<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>780</td><td class=line>            inferences<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>781</td><td class=line>            current_module_id<span style='color: #4e4e4e'>:</span> root_module_id<span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>782</td><td class=line>            inside_defer<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>783</td><td class=line>            errors
</td></tr>
<tr><td class=line-number>784</td><td class=line>        <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>785</td><td class=line>
</td></tr>
<tr><td class=line-number>786</td><td class=line>        typechecker<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>typecheck_module</span><span style='color: #4e4e4e'>(</span>parsed_namespace<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ScopeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> root_module_id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>787</td><td class=line>
</td></tr>
<tr><td class=line-number>788</td><td class=line>        <span style='color: #5f00d7'>return</span> typechecker<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>program</span>
</td></tr>
<tr><td class=line-number>789</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>790</td><td class=line>
</td></tr>
<tr><td class=line-number>791</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_function</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_function</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>792</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_variable</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>VarId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_variable</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>793</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_type</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_type</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>794</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_enum</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>EnumId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_enum</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>795</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_struct</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>StructId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_struct</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>796</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>get_scope</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_scope</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>797</td><td class=line>
</td></tr>
<tr><td class=line-number>798</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>current_module</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_module</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>799</td><td class=line>
</td></tr>
<tr><td class=line-number>800</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>error</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>message</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>801</td><td class=line>        <span style='color: #4e4e4e'>.</span>errors<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>JaktError</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Message</span><span style='color: #4e4e4e'>(</span>message<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>802</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>803</td><td class=line>
</td></tr>
<tr><td class=line-number>804</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>error_with_hint</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>message</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>hint</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>hint_span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>805</td><td class=line>        <span style='color: #4e4e4e'>.</span>errors<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>JaktError</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>MessageWithHint</span><span style='color: #4e4e4e'>(</span>message<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> hint<span style='color: #4e4e4e'>,</span> hint_span<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>806</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>807</td><td class=line>
</td></tr>
<tr><td class=line-number>808</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_integer</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_integer</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>809</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_floating</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_floating</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>810</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>is_numeric</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_numeric</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>811</td><td class=line>
</td></tr>
<tr><td class=line-number>812</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>create_scope</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parent_scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>can_throw</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>ScopeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>813</td><td class=line>        <span style='color: #5f00d7'>let</span> scope = <span style='color: #af8700'>Scope</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>814</td><td class=line>            namespace_name<span style='color: #4e4e4e'>:</span> <span style='color: #008700'>&quot;&quot;</span>
</td></tr>
<tr><td class=line-number>815</td><td class=line>            vars<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>:</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>816</td><td class=line>            structs<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>:</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>817</td><td class=line>            functions<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>:</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>818</td><td class=line>            enums<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>:</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>819</td><td class=line>            types<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>:</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>820</td><td class=line>            imports<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>:</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>821</td><td class=line>            parent<span style='color: #4e4e4e'>:</span> parent_scope_id
</td></tr>
<tr><td class=line-number>822</td><td class=line>            children<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>823</td><td class=line>            can_throw
</td></tr>
<tr><td class=line-number>824</td><td class=line>        <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>825</td><td class=line>
</td></tr>
<tr><td class=line-number>826</td><td class=line>        <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>scopes</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>scope<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>827</td><td class=line>
</td></tr>
<tr><td class=line-number>828</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>ScopeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>current_module_id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>scopes</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> - <span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>829</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>830</td><td class=line>
</td></tr>
<tr><td class=line-number>831</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>new_inference</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>TypeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>832</td><td class=line>        <span style='color: #5f00d7'>let</span> new_type_var = <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>new_type_variable</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>833</td><td class=line>
</td></tr>
<tr><td class=line-number>834</td><td class=line>        <span style='color: #4e4e4e'>.</span>inferences<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>new_type_var<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>835</td><td class=line>
</td></tr>
<tr><td class=line-number>836</td><td class=line>        <span style='color: #5f00d7'>let</span> inference_id = <span style='color: #4e4e4e'>.</span>inferences<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> - <span style='font-weight: bold;color: #875f00'>1</span>
</td></tr>
<tr><td class=line-number>837</td><td class=line>
</td></tr>
<tr><td class=line-number>838</td><td class=line>        <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Inference</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>InferenceId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> inference_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>839</td><td class=line>
</td></tr>
<tr><td class=line-number>840</td><td class=line>        <span style='color: #5f00d7'>let</span> new_type_id = <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> - <span style='font-weight: bold;color: #875f00'>1</span>
</td></tr>
<tr><td class=line-number>841</td><td class=line>
</td></tr>
<tr><td class=line-number>842</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> new_type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>843</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>844</td><td class=line>
</td></tr>
<tr><td class=line-number>845</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>find_struct_in_prelude</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>StructId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>846</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// FIXME: Remove this short-circuit once we actually start parsing the prelude!</span>
</td></tr>
<tr><td class=line-number>847</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>StructId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>848</td><td class=line>
</td></tr>
<tr><td class=line-number>849</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// start at the prelude scope id</span>
</td></tr>
<tr><td class=line-number>850</td><td class=line>        <span style='color: #5f00d7'>let</span> scope_id = <span style='color: #af8700'>ScopeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>851</td><td class=line>        <span style='color: #5f00d7'>let</span> struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>852</td><td class=line>        <span style='color: #5f00d7'>if</span> struct_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>853</td><td class=line>            <span style='color: #5f00d7'>return</span> struct_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>854</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>855</td><td class=line>
</td></tr>
<tr><td class=line-number>856</td><td class=line>        <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;internal error: {} builtin definition not found&quot;</span> name<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>857</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>StructId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>858</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>859</td><td class=line>
</td></tr>
<tr><td class=line-number>860</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>find_type_in_prelude</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>TypeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>861</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// FIXME: Remove this short-circuit once we actually start parsing the prelude!</span>
</td></tr>
<tr><td class=line-number>862</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>863</td><td class=line>
</td></tr>
<tr><td class=line-number>864</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// start at the prelude scope id</span>
</td></tr>
<tr><td class=line-number>865</td><td class=line>        <span style='color: #5f00d7'>let</span> scope_id = <span style='color: #af8700'>ScopeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>866</td><td class=line>        <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_type_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>867</td><td class=line>        <span style='color: #5f00d7'>if</span> type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>868</td><td class=line>            <span style='color: #5f00d7'>return</span> type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>869</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>870</td><td class=line>        <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;internal error: {} builtin definition not found&quot;</span> name<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>871</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>872</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>873</td><td class=line>
</td></tr>
<tr><td class=line-number>874</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>try_to_promote_constant_expr_to_type</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>lhs_type</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>checked_rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedExpression</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>875</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> <span style='color: #4e4e4e'>.</span>is_integer<span style='color: #4e4e4e'>(</span>lhs_type<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>876</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>877</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>878</td><td class=line>
</td></tr>
<tr><td class=line-number>879</td><td class=line>        <span style='color: #5f00d7'>let</span> rhs_constant_opt = checked_rhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>to_number_constant</span><span style='color: #4e4e4e'>(</span>program<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>880</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> rhs_constant_opt<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>881</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>882</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>883</td><td class=line>        <span style='color: #5f00d7'>let</span> rhs_constant = rhs_constant_opt<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>884</td><td class=line>
</td></tr>
<tr><td class=line-number>885</td><td class=line>        <span style='color: #5f00d7'>let</span> result = <span style='color: #005fd7'>promote</span><span style='color: #4e4e4e'>(</span>rhs_constant<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> lhs_type<span style='color: #4e4e4e'>,</span> program<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>886</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> result<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>887</td><td class=line>            <span style='color: #5f00d7'>let</span> type = <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>lhs_type<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>888</td><td class=line>            <span style='color: #4e4e4e'>.</span>error_with_hint<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Integer promotion failed&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Cannot fit value into range [{}, {}] of type {}.&quot;</span><span style='color: #4e4e4e'>,</span> type<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>min</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> type<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>max</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs_type<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>889</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>890</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>891</td><td class=line>        <span style='color: #5f00d7'>let</span> new_constant = result<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>892</td><td class=line>
</td></tr>
<tr><td class=line-number>893</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> new_constant<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> lhs_type<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>894</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>895</td><td class=line>
</td></tr>
<tr><td class=line-number>896</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>type_name</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='font-weight: bold;color: #005f5f'>String</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>897</td><td class=line>        <span style='color: #5f00d7'>let</span> type = <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>898</td><td class=line>
</td></tr>
<tr><td class=line-number>899</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>match</span> type <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>900</td><td class=line>            <span style='color: #af8700'>Void</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;void&quot;</span>
</td></tr>
<tr><td class=line-number>901</td><td class=line>            <span style='color: #af8700'>I8</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;i8&quot;</span>
</td></tr>
<tr><td class=line-number>902</td><td class=line>            <span style='color: #af8700'>I16</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;i16&quot;</span>
</td></tr>
<tr><td class=line-number>903</td><td class=line>            <span style='color: #af8700'>I32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;i32&quot;</span>
</td></tr>
<tr><td class=line-number>904</td><td class=line>            <span style='color: #af8700'>I64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;i64&quot;</span>
</td></tr>
<tr><td class=line-number>905</td><td class=line>            <span style='color: #af8700'>U8</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;u8&quot;</span>
</td></tr>
<tr><td class=line-number>906</td><td class=line>            <span style='color: #af8700'>U16</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;u16&quot;</span>
</td></tr>
<tr><td class=line-number>907</td><td class=line>            <span style='color: #af8700'>U32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;u32&quot;</span>
</td></tr>
<tr><td class=line-number>908</td><td class=line>            <span style='color: #af8700'>U64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;u64&quot;</span>
</td></tr>
<tr><td class=line-number>909</td><td class=line>            <span style='color: #af8700'>F32</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;f32&quot;</span>
</td></tr>
<tr><td class=line-number>910</td><td class=line>            <span style='color: #af8700'>F64</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;f64&quot;</span>
</td></tr>
<tr><td class=line-number>911</td><td class=line>            <span style='color: #af8700'>Usize</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;usize&quot;</span>
</td></tr>
<tr><td class=line-number>912</td><td class=line>            <span style='color: #af8700'>CChar</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;c_char&quot;</span>
</td></tr>
<tr><td class=line-number>913</td><td class=line>            <span style='color: #af8700'>CInt</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;c_int&quot;</span>
</td></tr>
<tr><td class=line-number>914</td><td class=line>            <span style='color: #af8700'>Bool</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;bool&quot;</span>
</td></tr>
<tr><td class=line-number>915</td><td class=line>            <span style='color: #af8700'>JaktString</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;String&quot;</span>
</td></tr>
<tr><td class=line-number>916</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> type <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>917</td><td class=line>                <span style='color: #af8700'>Enum</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>get_enum<span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span>
</td></tr>
<tr><td class=line-number>918</td><td class=line>                <span style='color: #af8700'>Struct</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>get_struct<span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span>
</td></tr>
<tr><td class=line-number>919</td><td class=line>                <span style='color: #af8700'>GenericEnumInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>920</td><td class=line>                    <span style='color: #5f00d7'>mut</span> output = <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;enum {}&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>get_enum<span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>921</td><td class=line>
</td></tr>
<tr><td class=line-number>922</td><td class=line>                    output += <span style='color: #008700'>&quot;&lt;&quot;</span>
</td></tr>
<tr><td class=line-number>923</td><td class=line>                    <span style='color: #5f00d7'>mut</span> first = <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>924</td><td class=line>                    <span style='color: #5f00d7'>for</span> arg <span style='color: #5f00d7'>in</span> args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>925</td><td class=line>                        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> first <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>926</td><td class=line>                            output += <span style='color: #008700'>&quot;, &quot;</span>
</td></tr>
<tr><td class=line-number>927</td><td class=line>                        <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>928</td><td class=line>                            first = <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>929</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>930</td><td class=line>
</td></tr>
<tr><td class=line-number>931</td><td class=line>                        output += <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>arg<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>932</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>933</td><td class=line>
</td></tr>
<tr><td class=line-number>934</td><td class=line>                    output += <span style='color: #008700'>&quot;&gt;&quot;</span>
</td></tr>
<tr><td class=line-number>935</td><td class=line>
</td></tr>
<tr><td class=line-number>936</td><td class=line>                    <span style='color: #5f00d7'>yield</span> output
</td></tr>
<tr><td class=line-number>937</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>938</td><td class=line>                <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>939</td><td class=line>                    <span style='font-style: italic;color: #8a8a8a'>// FIXME: remove prelude_struct_id debugging branch once prelude is added</span>
</td></tr>
<tr><td class=line-number>940</td><td class=line>                    <span style='color: #5f00d7'>let</span> prelude_struct_id = <span style='color: #af8700'>StructId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>941</td><td class=line>
</td></tr>
<tr><td class=line-number>942</td><td class=line>                    <span style='color: #5f00d7'>let</span> array_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Array&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>943</td><td class=line>                    <span style='color: #5f00d7'>let</span> dictionary_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Dictionary&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>944</td><td class=line>                    <span style='color: #5f00d7'>let</span> optional_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Optional&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>945</td><td class=line>                    <span style='color: #5f00d7'>let</span> range_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Range&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>946</td><td class=line>                    <span style='color: #5f00d7'>let</span> set_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Set&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>947</td><td class=line>                    <span style='color: #5f00d7'>let</span> tuple_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Tuple&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>948</td><td class=line>                    <span style='color: #5f00d7'>let</span> weak_ptr_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;WeakPtr&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>949</td><td class=line>
</td></tr>
<tr><td class=line-number>950</td><td class=line>                    <span style='color: #5f00d7'>mut</span> output = <span style='color: #008700'>&quot;&quot;</span>
</td></tr>
<tr><td class=line-number>951</td><td class=line>
</td></tr>
<tr><td class=line-number>952</td><td class=line>                    <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>prelude_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>953</td><td class=line>                        <span style='color: #5f00d7'>mut</span> arg_names<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>954</td><td class=line>                        <span style='color: #5f00d7'>for</span> type_id <span style='color: #5f00d7'>in</span> args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>955</td><td class=line>                            arg_names<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>956</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>957</td><td class=line>                        output = <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;TODO prelude struct: {}, args: {}&quot;</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>,</span> arg_names<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>958</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>array_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>959</td><td class=line>                        output = <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;[{}]&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>960</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>dictionary_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>961</td><td class=line>                        output = <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;[{}:{}]&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>962</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>optional_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>963</td><td class=line>                        output = <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;{}?&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>964</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>range_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>965</td><td class=line>                        output = <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;{}..{}&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>966</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>set_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>967</td><td class=line>                        output = <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;{{{}}}&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>968</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>tuple_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>969</td><td class=line>                        output = <span style='color: #008700'>&quot;(&quot;</span>
</td></tr>
<tr><td class=line-number>970</td><td class=line>                        <span style='color: #5f00d7'>mut</span> first = <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>971</td><td class=line>                        <span style='color: #5f00d7'>for</span> arg <span style='color: #5f00d7'>in</span> args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>972</td><td class=line>                            <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> first <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>973</td><td class=line>                                output += <span style='color: #008700'>&quot;, &quot;</span>
</td></tr>
<tr><td class=line-number>974</td><td class=line>                            <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>975</td><td class=line>                                first = <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>976</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>977</td><td class=line>                            output += <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>978</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>979</td><td class=line>                        output += <span style='color: #008700'>&quot;}&quot;</span>
</td></tr>
<tr><td class=line-number>980</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>weak_ptr_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>981</td><td class=line>                        output = <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;weak {}?&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>982</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>983</td><td class=line>                        <span style='color: #5f00d7'>let</span> structure = <span style='color: #4e4e4e'>.</span>get_struct<span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>984</td><td class=line>                        output = structure<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span>
</td></tr>
<tr><td class=line-number>985</td><td class=line>                        output += <span style='color: #008700'>&quot;&lt;&quot;</span>
</td></tr>
<tr><td class=line-number>986</td><td class=line>                        <span style='color: #5f00d7'>mut</span> first = <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>987</td><td class=line>                        <span style='color: #5f00d7'>for</span> arg <span style='color: #5f00d7'>in</span> args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>988</td><td class=line>                            <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> first <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>989</td><td class=line>                                output += <span style='color: #008700'>&quot;, &quot;</span>
</td></tr>
<tr><td class=line-number>990</td><td class=line>                            <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>991</td><td class=line>                                first = <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>992</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>993</td><td class=line>                            output += <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>994</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>995</td><td class=line>                        output += <span style='color: #008700'>&quot;&gt;&quot;</span>
</td></tr>
<tr><td class=line-number>996</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>997</td><td class=line>
</td></tr>
<tr><td class=line-number>998</td><td class=line>                    <span style='color: #5f00d7'>yield</span> output
</td></tr>
<tr><td class=line-number>999</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1000</td><td class=line>                <span style='color: #af8700'>TypeVariable</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> name
</td></tr>
<tr><td class=line-number>1001</td><td class=line>                <span style='color: #af8700'>Inference</span><span style='color: #4e4e4e'>(</span>inference_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #008700'>&quot;TODO Inference&quot;</span>
</td></tr>
<tr><td class=line-number>1002</td><td class=line>                <span style='color: #af8700'>RawPtr</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;raw {}&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1003</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;TODO {}&quot;</span><span style='color: #4e4e4e'>,</span> type<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1004</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1005</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1006</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1007</td><td class=line>
</td></tr>
<tr><td class=line-number>1008</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>expression_type</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>TypeId</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> expr <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1009</td><td class=line>        <span style='color: #af8700'>Boolean</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1010</td><td class=line>        <span style='color: #af8700'>NumericConstant</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1011</td><td class=line>        <span style='color: #af8700'>QuotedString</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>String</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1012</td><td class=line>        <span style='color: #af8700'>ByteConstant</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1013</td><td class=line>        <span style='color: #af8700'>CharacterConstant</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>CChar</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1014</td><td class=line>        <span style='color: #af8700'>UnaryOp</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1015</td><td class=line>        <span style='color: #af8700'>BinaryOp</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1016</td><td class=line>        <span style='color: #af8700'>JaktTuple</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1017</td><td class=line>        <span style='color: #af8700'>Range</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1018</td><td class=line>        <span style='color: #af8700'>JaktArray</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1019</td><td class=line>        <span style='color: #af8700'>JaktDictionary</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1020</td><td class=line>        <span style='color: #af8700'>JaktSet</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1021</td><td class=line>        <span style='color: #af8700'>IndexedExpression</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1022</td><td class=line>        <span style='color: #af8700'>IndexedDictionary</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1023</td><td class=line>        <span style='color: #af8700'>IndexedTuple</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1024</td><td class=line>        <span style='color: #af8700'>IndexedStruct</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1025</td><td class=line>        <span style='color: #af8700'>Call</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1026</td><td class=line>        <span style='color: #af8700'>MethodCall</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1027</td><td class=line>        <span style='color: #af8700'>NamespacedVar</span><span style='color: #4e4e4e'>(</span>var<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>type_id</span>
</td></tr>
<tr><td class=line-number>1028</td><td class=line>        <span style='color: #af8700'>Var</span><span style='color: #4e4e4e'>(</span>var<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>type_id</span>
</td></tr>
<tr><td class=line-number>1029</td><td class=line>        <span style='color: #af8700'>OptionalNone</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1030</td><td class=line>        <span style='color: #af8700'>OptionalSome</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1031</td><td class=line>        <span style='color: #af8700'>ForcedUnwrap</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1032</td><td class=line>        <span style='color: #af8700'>Block</span><span style='color: #4e4e4e'>(</span>type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> type_id
</td></tr>
<tr><td class=line-number>1033</td><td class=line>        <span style='color: #af8700'>Garbage</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Void</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1034</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1035</td><td class=line>
</td></tr>
<tr><td class=line-number>1036</td><td class=line>    <span style='font-style: italic;color: #8a8a8a'>// FIXME: not a method of expression because of https://github.com/SerenityOS/jakt/issues/527</span>
</td></tr>
<tr><td class=line-number>1037</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>expression_span</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>Span</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> expr <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1038</td><td class=line>        <span style='color: #af8700'>Boolean</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1039</td><td class=line>        <span style='color: #af8700'>NumericConstant</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1040</td><td class=line>        <span style='color: #af8700'>QuotedString</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1041</td><td class=line>        <span style='color: #af8700'>ByteConstant</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1042</td><td class=line>        <span style='color: #af8700'>CharacterConstant</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1043</td><td class=line>        <span style='color: #af8700'>UnaryOp</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1044</td><td class=line>        <span style='color: #af8700'>BinaryOp</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1045</td><td class=line>        <span style='color: #af8700'>JaktTuple</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1046</td><td class=line>        <span style='color: #af8700'>Range</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1047</td><td class=line>        <span style='color: #af8700'>JaktArray</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1048</td><td class=line>        <span style='color: #af8700'>JaktDictionary</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1049</td><td class=line>        <span style='color: #af8700'>JaktSet</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1050</td><td class=line>        <span style='color: #af8700'>IndexedExpression</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1051</td><td class=line>        <span style='color: #af8700'>IndexedDictionary</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1052</td><td class=line>        <span style='color: #af8700'>IndexedTuple</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1053</td><td class=line>        <span style='color: #af8700'>IndexedStruct</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1054</td><td class=line>        <span style='color: #af8700'>Call</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1055</td><td class=line>        <span style='color: #af8700'>MethodCall</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1056</td><td class=line>        <span style='color: #af8700'>NamespacedVar</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1057</td><td class=line>        <span style='color: #af8700'>Var</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1058</td><td class=line>        <span style='color: #af8700'>OptionalNone</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1059</td><td class=line>        <span style='color: #af8700'>OptionalSome</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1060</td><td class=line>        <span style='color: #af8700'>ForcedUnwrap</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1061</td><td class=line>        <span style='color: #af8700'>Block</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1062</td><td class=line>        <span style='color: #af8700'>Garbage</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> span
</td></tr>
<tr><td class=line-number>1063</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1064</td><td class=line>
</td></tr>
<tr><td class=line-number>1065</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>expression_is_mutable</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> expr <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1066</td><td class=line>        <span style='color: #af8700'>Var</span><span style='color: #4e4e4e'>(</span>var<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>is_mutable</span>
</td></tr>
<tr><td class=line-number>1067</td><td class=line>        <span style='color: #af8700'>IndexedStruct</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>expression_is_mutable<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1068</td><td class=line>        <span style='color: #af8700'>IndexedExpression</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>expression_is_mutable<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1069</td><td class=line>        <span style='color: #af8700'>IndexedTuple</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>expression_is_mutable<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1070</td><td class=line>        <span style='color: #af8700'>IndexedDictionary</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>expression_is_mutable<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1071</td><td class=line>        <span style='color: #af8700'>ForcedUnwrap</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>expression_is_mutable<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1072</td><td class=line>        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>1073</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1074</td><td class=line>
</td></tr>
<tr><td class=line-number>1075</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>unify</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>lhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>lhs_span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>rhs_span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>TypeId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1076</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// FIXME: Add more unification logic</span>
</td></tr>
<tr><td class=line-number>1077</td><td class=line>        <span style='color: #5f00d7'>if</span> lhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> != rhs<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1078</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;types incompatible &quot;</span><span style='color: #4e4e4e'>,</span> rhs_span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1079</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1080</td><td class=line>        <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1081</td><td class=line>            <span style='color: #5f00d7'>return</span> lhs
</td></tr>
<tr><td class=line-number>1082</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1083</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1084</td><td class=line>
</td></tr>
<tr><td class=line-number>1085</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>find_or_add_type_id</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>type</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Type</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>TypeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1086</td><td class=line>        <span style='color: #5f00d7'>let</span> module = <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1087</td><td class=line>        <span style='color: #5f00d7'>let</span> module_id = module<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span>
</td></tr>
<tr><td class=line-number>1088</td><td class=line>
</td></tr>
<tr><td class=line-number>1089</td><td class=line>        <span style='color: #5f00d7'>mut</span> idx = <span style='font-weight: bold;color: #875f00'>0uz</span>
</td></tr>
<tr><td class=line-number>1090</td><td class=line>        <span style='color: #5f00d7'>for</span> item <span style='color: #5f00d7'>in</span> module<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1091</td><td class=line>            <span style='color: #5f00d7'>if</span> item<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>type<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1092</td><td class=line>                <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> module_id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> idx<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1093</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1094</td><td class=line>            ++idx
</td></tr>
<tr><td class=line-number>1095</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1096</td><td class=line>
</td></tr>
<tr><td class=line-number>1097</td><td class=line>        idx = <span style='font-weight: bold;color: #875f00'>0uz</span>
</td></tr>
<tr><td class=line-number>1098</td><td class=line>        <span style='color: #5f00d7'>for</span> item <span style='color: #5f00d7'>in</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1099</td><td class=line>            <span style='color: #5f00d7'>if</span> item<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>type<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1100</td><td class=line>                <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> idx<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1101</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1102</td><td class=line>            ++idx
</td></tr>
<tr><td class=line-number>1103</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1104</td><td class=line>
</td></tr>
<tr><td class=line-number>1105</td><td class=line>        <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>type<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1106</td><td class=line>
</td></tr>
<tr><td class=line-number>1107</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> module_id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>current_module_id</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> - <span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1108</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1109</td><td class=line>
</td></tr>
<tr><td class=line-number>1110</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>find_type_in_scope</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>TypeId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1111</td><td class=line>        <span style='color: #5f00d7'>mut</span> current = scope_id
</td></tr>
<tr><td class=line-number>1112</td><td class=line>
</td></tr>
<tr><td class=line-number>1113</td><td class=line>        <span style='color: #5f00d7'>loop</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1114</td><td class=line>            <span style='color: #5f00d7'>let</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>current<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1115</td><td class=line>
</td></tr>
<tr><td class=line-number>1116</td><td class=line>            <span style='color: #5f00d7'>for</span> type <span style='color: #5f00d7'>in</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1117</td><td class=line>                <span style='color: #5f00d7'>if</span> type<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span> == name <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1118</td><td class=line>                    <span style='color: #5f00d7'>return</span> type<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>1</span>
</td></tr>
<tr><td class=line-number>1119</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1120</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1121</td><td class=line>
</td></tr>
<tr><td class=line-number>1122</td><td class=line>            <span style='color: #5f00d7'>if</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parent</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1123</td><td class=line>                current = scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parent</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1124</td><td class=line>            <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1125</td><td class=line>                break
</td></tr>
<tr><td class=line-number>1126</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1127</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1128</td><td class=line>
</td></tr>
<tr><td class=line-number>1129</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1130</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1131</td><td class=line>
</td></tr>
<tr><td class=line-number>1132</td><td class=line>    <span style='font-style: italic;color: #8a8a8a'>// Find the namespace in the current scope, or one of its parents,</span>
</td></tr>
<tr><td class=line-number>1133</td><td class=line>    <span style='font-style: italic;color: #8a8a8a'>// and whether the found scope was an import.</span>
</td></tr>
<tr><td class=line-number>1134</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>find_namespace_in_scope</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #4e4e4e'>(</span><span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='font-weight: bold;color: #005f5f'>bool</span><span style='color: #4e4e4e'>)</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1135</td><td class=line>        <span style='color: #5f00d7'>mut</span> current = scope_id;
</td></tr>
<tr><td class=line-number>1136</td><td class=line>
</td></tr>
<tr><td class=line-number>1137</td><td class=line>        <span style='color: #5f00d7'>loop</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1138</td><td class=line>            <span style='color: #5f00d7'>let</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>current<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1139</td><td class=line>
</td></tr>
<tr><td class=line-number>1140</td><td class=line>            <span style='color: #5f00d7'>for</span> child <span style='color: #5f00d7'>in</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>children</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1141</td><td class=line>                <span style='color: #5f00d7'>let</span> child_scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>child<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1142</td><td class=line>                <span style='color: #5f00d7'>if</span> child_scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>namespace_name</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1143</td><td class=line>                    <span style='color: #5f00d7'>if</span> name == child_scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>namespace_name</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1144</td><td class=line>                        <span style='color: #5f00d7'>return</span><span style='color: #005fd7'></span> <span style='color: #4e4e4e'>(</span>current<span style='color: #4e4e4e'>,</span> <span style='font-weight: bold;color: #875f00'>false</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1145</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1146</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1147</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1148</td><td class=line>
</td></tr>
<tr><td class=line-number>1149</td><td class=line>            <span style='color: #5f00d7'>if</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parent</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1150</td><td class=line>                current = scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parent</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1151</td><td class=line>            <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1152</td><td class=line>                break
</td></tr>
<tr><td class=line-number>1153</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1154</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1155</td><td class=line>
</td></tr>
<tr><td class=line-number>1156</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// if we do not find it then check imports</span>
</td></tr>
<tr><td class=line-number>1157</td><td class=line>        <span style='color: #5f00d7'>let</span> module_id = current<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span>
</td></tr>
<tr><td class=line-number>1158</td><td class=line>
</td></tr>
<tr><td class=line-number>1159</td><td class=line>        <span style='color: #5f00d7'>for</span> imp <span style='color: #5f00d7'>in</span> <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>ScopeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> module_id<span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>imports</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1160</td><td class=line>            <span style='color: #5f00d7'>if</span> name == imp<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1161</td><td class=line>                <span style='color: #5f00d7'>let</span> value = imp<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>1</span>
</td></tr>
<tr><td class=line-number>1162</td><td class=line>                <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>(</span><span style='color: #af8700'>ScopeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> value<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='font-weight: bold;color: #875f00'>true</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1163</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1164</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1165</td><td class=line>
</td></tr>
<tr><td class=line-number>1166</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1167</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1168</td><td class=line>
</td></tr>
<tr><td class=line-number>1169</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>add_type_to_scope</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>type_name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>type_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1170</td><td class=line>        <span style='color: #5f00d7'>mut</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1171</td><td class=line>        <span style='color: #5f00d7'>let</span> found_type_id = <span style='color: #4e4e4e'>.</span>find_type_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> type_name<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1172</td><td class=line>        <span style='color: #5f00d7'>if</span> found_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1173</td><td class=line>            <span style='font-style: italic;color: #8a8a8a'>// FIXME: Show hint of the original definition, once we store the name span.</span>
</td></tr>
<tr><td class=line-number>1174</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1175</td><td class=line>                <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Redefinition of type {}&quot;</span><span style='color: #4e4e4e'>,</span> type_name<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1176</td><td class=line>                span
</td></tr>
<tr><td class=line-number>1177</td><td class=line>            <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1178</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>1179</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1180</td><td class=line>        scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>set</span><span style='color: #4e4e4e'>(</span>key<span style='color: #4e4e4e'>:</span> type_name<span style='color: #4e4e4e'>,</span> value<span style='color: #4e4e4e'>:</span> type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1181</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>1182</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1183</td><td class=line>
</td></tr>
<tr><td class=line-number>1184</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>add_function_to_scope</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parent_scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>function_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1185</td><td class=line>        <span style='color: #5f00d7'>mut</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> parent_scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1186</td><td class=line>        <span style='color: #5f00d7'>for</span> existing_function <span style='color: #5f00d7'>in</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>functions</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1187</td><td class=line>            <span style='color: #5f00d7'>if</span> name == existing_function<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1188</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// FIXME: Show hint of the original definition, once we store the name span.</span>
</td></tr>
<tr><td class=line-number>1189</td><td class=line>                <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Redefinition of function {}&quot;</span><span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1190</td><td class=line>                <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>1191</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1192</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1193</td><td class=line>        scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>functions</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>set</span><span style='color: #4e4e4e'>(</span>key<span style='color: #4e4e4e'>:</span> name<span style='color: #4e4e4e'>,</span> value<span style='color: #4e4e4e'>:</span> function_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1194</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>1195</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1196</td><td class=line>
</td></tr>
<tr><td class=line-number>1197</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>add_var_to_scope</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>var_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>VarId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='font-weight: bold;color: #005f5f'>bool</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1198</td><td class=line>        <span style='color: #5f00d7'>mut</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1199</td><td class=line>        <span style='color: #5f00d7'>for</span> existing_var <span style='color: #5f00d7'>in</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>vars</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1200</td><td class=line>            <span style='color: #5f00d7'>if</span> name == existing_var<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1201</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// FIXME: Show hint of the original definition, once we store the name span.</span>
</td></tr>
<tr><td class=line-number>1202</td><td class=line>                <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Redefinition of variable {}&quot;</span><span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1203</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1204</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1205</td><td class=line>        scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>vars</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>set</span><span style='color: #4e4e4e'>(</span>key<span style='color: #4e4e4e'>:</span> name<span style='color: #4e4e4e'>,</span> value<span style='color: #4e4e4e'>:</span> var_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1206</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>1207</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1208</td><td class=line>    
</td></tr>
<tr><td class=line-number>1209</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>find_function_in_scope</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parent_scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>function_name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>FunctionId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1210</td><td class=line>        <span style='color: #5f00d7'>mut</span> scope_id = <span style='color: #af8700'>Some</span><span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1211</td><td class=line>        <span style='color: #5f00d7'>while</span> scope_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1212</td><td class=line>            <span style='color: #5f00d7'>let</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> scope_id<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1213</td><td class=line>            <span style='color: #5f00d7'>for</span> s <span style='color: #5f00d7'>in</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>functions</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1214</td><td class=line>                <span style='color: #5f00d7'>if</span> s<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span> == function_name <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1215</td><td class=line>                    <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>Some</span><span style='color: #4e4e4e'>(</span>s<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1216</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1217</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1218</td><td class=line>            scope_id = scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parent</span>
</td></tr>
<tr><td class=line-number>1219</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1220</td><td class=line>
</td></tr>
<tr><td class=line-number>1221</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1222</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1223</td><td class=line>
</td></tr>
<tr><td class=line-number>1224</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>find_struct_in_scope</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>StructId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1225</td><td class=line>        <span style='color: #5f00d7'>mut</span> current_scope_id = <span style='color: #af8700'>Some</span><span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1226</td><td class=line>        <span style='color: #5f00d7'>while</span> current_scope_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1227</td><td class=line>            <span style='color: #5f00d7'>let</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> current_scope_id<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1228</td><td class=line>            <span style='color: #5f00d7'>for</span> s <span style='color: #5f00d7'>in</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>structs</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1229</td><td class=line>                <span style='color: #5f00d7'>if</span> s<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span> == name <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1230</td><td class=line>                    <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>Some</span><span style='color: #4e4e4e'>(</span>s<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1231</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1232</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1233</td><td class=line>            current_scope_id = scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parent</span>
</td></tr>
<tr><td class=line-number>1234</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1235</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1236</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1237</td><td class=line>
</td></tr>
<tr><td class=line-number>1238</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_module</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_namespace</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedNamespace</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1239</td><td class=line>        <span style='color: #4e4e4e'>.</span>typecheck_namespace_predecl<span style='color: #4e4e4e'>(</span>parsed_namespace<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1240</td><td class=line>        <span style='color: #4e4e4e'>.</span>typecheck_namespace_declarations<span style='color: #4e4e4e'>(</span>parsed_namespace<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1241</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1242</td><td class=line>
</td></tr>
<tr><td class=line-number>1243</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_namespace_predecl</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_namespace</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedNamespace</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1244</td><td class=line>        <span style='color: #5f00d7'>for</span> fun <span style='color: #5f00d7'>in</span> parsed_namespace<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>functions</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1245</td><td class=line>            <span style='color: #4e4e4e'>.</span>typecheck_function_predecl<span style='color: #4e4e4e'>(</span>parsed_function<span style='color: #4e4e4e'>:</span> fun<span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1246</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1247</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1248</td><td class=line>
</td></tr>
<tr><td class=line-number>1249</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_namespace_declarations</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_namespace</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedNamespace</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1250</td><td class=line>        <span style='color: #5f00d7'>for</span> fun <span style='color: #5f00d7'>in</span> parsed_namespace<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>functions</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1251</td><td class=line>            <span style='color: #4e4e4e'>.</span>typecheck_function<span style='color: #4e4e4e'>(</span>parsed_function<span style='color: #4e4e4e'>:</span> fun<span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1252</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1253</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1254</td><td class=line>
</td></tr>
<tr><td class=line-number>1255</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_function_predecl</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_function</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedFunction</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parent_scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1256</td><td class=line>        <span style='color: #5f00d7'>let</span> function_scope_id = <span style='color: #4e4e4e'>.</span>create_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>,</span> can_throw<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>can_throw</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1257</td><td class=line>        <span style='color: #5f00d7'>let</span> block_scope_id = <span style='color: #4e4e4e'>.</span>create_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>:</span> function_scope_id<span style='color: #4e4e4e'>,</span> can_throw<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>can_throw</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1258</td><td class=line>        <span style='color: #5f00d7'>let</span> module_id = <span style='color: #4e4e4e'>.</span>current_module_id<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span>
</td></tr>
<tr><td class=line-number>1259</td><td class=line>
</td></tr>
<tr><td class=line-number>1260</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// TODO: Make this true if it&#39;s a method of a generic class/struct.</span>
</td></tr>
<tr><td class=line-number>1261</td><td class=line>        <span style='color: #5f00d7'>let</span> is_generic = <span style='color: #5f00d7'>not</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>generic_parameters</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_empty</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1262</td><td class=line>
</td></tr>
<tr><td class=line-number>1263</td><td class=line>        <span style='color: #5f00d7'>let</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span> = <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1264</td><td class=line>        <span style='color: #5f00d7'>let</span> none_type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1265</td><td class=line>
</td></tr>
<tr><td class=line-number>1266</td><td class=line>        <span style='color: #5f00d7'>mut</span> checked_function = <span style='color: #af8700'>CheckedFunction</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1267</td><td class=line>            name<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span>
</td></tr>
<tr><td class=line-number>1268</td><td class=line>            return_type_id<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span>
</td></tr>
<tr><td class=line-number>1269</td><td class=line>            params<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1270</td><td class=line>            generic_params<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1271</td><td class=line>            block<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedBlock</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1272</td><td class=line>                statements<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1273</td><td class=line>                scope_id<span style='color: #4e4e4e'>:</span> block_scope_id
</td></tr>
<tr><td class=line-number>1274</td><td class=line>                definitely_returns<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>1275</td><td class=line>                yielded_type<span style='color: #4e4e4e'>:</span> none_type_id
</td></tr>
<tr><td class=line-number>1276</td><td class=line>            <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1277</td><td class=line>            can_throw<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>can_throw</span>
</td></tr>
<tr><td class=line-number>1278</td><td class=line>            type<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>FunctionType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Normal</span>
</td></tr>
<tr><td class=line-number>1279</td><td class=line>            linkage<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>linkage</span>
</td></tr>
<tr><td class=line-number>1280</td><td class=line>            function_scope_id
</td></tr>
<tr><td class=line-number>1281</td><td class=line>        <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1282</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// FIXME: We can&#39;t return a `mut Foo` from a function right now, but assigning anything to a `mut` variable makes it mutable.</span>
</td></tr>
<tr><td class=line-number>1283</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>//        AKA, working around one bug with another bug. :^)</span>
</td></tr>
<tr><td class=line-number>1284</td><td class=line>        <span style='color: #5f00d7'>mut</span> current_module = <span style='color: #4e4e4e'>.</span>current_module<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1285</td><td class=line>        <span style='color: #5f00d7'>let</span> function_id = current_module<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>add_function</span><span style='color: #4e4e4e'>(</span>checked_function<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1286</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_function_scope_id = checked_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>function_scope_id</span>
</td></tr>
<tr><td class=line-number>1287</td><td class=line>
</td></tr>
<tr><td class=line-number>1288</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// Check generic parameters</span>
</td></tr>
<tr><td class=line-number>1289</td><td class=line>        <span style='color: #5f00d7'>for</span> generic_parameter <span style='color: #5f00d7'>in</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>generic_parameters</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1290</td><td class=line>
</td></tr>
<tr><td class=line-number>1291</td><td class=line>            current_module<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>TypeVariable</span><span style='color: #4e4e4e'>(</span>generic_parameter<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1292</td><td class=line>
</td></tr>
<tr><td class=line-number>1293</td><td class=line>            <span style='color: #5f00d7'>let</span> type_var_type_id = <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1294</td><td class=line>                module<span style='color: #4e4e4e'>:</span> current_module<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span>
</td></tr>
<tr><td class=line-number>1295</td><td class=line>                id<span style='color: #4e4e4e'>:</span> current_module<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>types</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> - <span style='font-weight: bold;color: #875f00'>1</span>
</td></tr>
<tr><td class=line-number>1296</td><td class=line>            <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1297</td><td class=line>            checked_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>generic_params</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>FunctionGenericParameter</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Parameter</span><span style='color: #4e4e4e'>(</span>type_var_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1298</td><td class=line>
</td></tr>
<tr><td class=line-number>1299</td><td class=line>            <span style='color: #5f00d7'>let</span> external_linkage = <span style='color: #5f00d7'>match</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>linkage</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1300</td><td class=line>                <span style='color: #af8700'>FunctionLinkage</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>External</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>1301</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>1302</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1303</td><td class=line>            <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>must_instantiate</span> <span style='color: #5f00d7'>or</span> external_linkage <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1304</td><td class=line>                <span style='color: #4e4e4e'>.</span>add_type_to_scope<span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1305</td><td class=line>                    scope_id<span style='color: #4e4e4e'>:</span> checked_function_scope_id
</td></tr>
<tr><td class=line-number>1306</td><td class=line>                    type_name<span style='color: #4e4e4e'>:</span> generic_parameter<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span>
</td></tr>
<tr><td class=line-number>1307</td><td class=line>                    type_id<span style='color: #4e4e4e'>:</span> type_var_type_id
</td></tr>
<tr><td class=line-number>1308</td><td class=line>                    span<span style='color: #4e4e4e'>:</span> generic_parameter<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>span</span>
</td></tr>
<tr><td class=line-number>1309</td><td class=line>                <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1310</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1311</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1312</td><td class=line>
</td></tr>
<tr><td class=line-number>1313</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// Check parameters</span>
</td></tr>
<tr><td class=line-number>1314</td><td class=line>        <span style='color: #5f00d7'>for</span> parameter <span style='color: #5f00d7'>in</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>params</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1315</td><td class=line>            <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> parameter<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parsed_type</span><span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>:</span> checked_function_scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1316</td><td class=line>
</td></tr>
<tr><td class=line-number>1317</td><td class=line>            <span style='color: #5f00d7'>let</span> variable = <span style='color: #af8700'>CheckedVariable</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1318</td><td class=line>                name<span style='color: #4e4e4e'>:</span> parameter<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span>
</td></tr>
<tr><td class=line-number>1319</td><td class=line>                type_id
</td></tr>
<tr><td class=line-number>1320</td><td class=line>                is_mutable<span style='color: #4e4e4e'>:</span> parameter<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>is_mutable</span>
</td></tr>
<tr><td class=line-number>1321</td><td class=line>                definition_span<span style='color: #4e4e4e'>:</span> parameter<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>span</span>
</td></tr>
<tr><td class=line-number>1322</td><td class=line>            <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1323</td><td class=line>
</td></tr>
<tr><td class=line-number>1324</td><td class=line>            <span style='color: #5f00d7'>let</span> checked_parameter = <span style='color: #af8700'>CheckedParameter</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1325</td><td class=line>                requires_label<span style='color: #4e4e4e'>:</span> parameter<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>requires_label</span>
</td></tr>
<tr><td class=line-number>1326</td><td class=line>                variable
</td></tr>
<tr><td class=line-number>1327</td><td class=line>            <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1328</td><td class=line>
</td></tr>
<tr><td class=line-number>1329</td><td class=line>            checked_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>params</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>checked_parameter<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1330</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1331</td><td class=line>
</td></tr>
<tr><td class=line-number>1332</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// Check return type</span>
</td></tr>
<tr><td class=line-number>1333</td><td class=line>        checked_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>return_type_id</span> = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>return_type</span><span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>:</span> checked_function_scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1334</td><td class=line>
</td></tr>
<tr><td class=line-number>1335</td><td class=line>        <span style='color: #4e4e4e'>.</span>add_function_to_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>,</span> function_id<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name_span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1336</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1337</td><td class=line>
</td></tr>
<tr><td class=line-number>1338</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_jakt_main</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_function</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedFunction</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1339</td><td class=line>        <span style='color: #5f00d7'>let</span> param_type_error = <span style='color: #008700'>&quot;Main function must take a single array of strings as its parameter&quot;</span>
</td></tr>
<tr><td class=line-number>1340</td><td class=line>        <span style='color: #5f00d7'>if</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>params</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> &gt; <span style='font-weight: bold;color: #875f00'>1</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1341</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>param_type_error<span style='color: #4e4e4e'>,</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name_span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1342</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1343</td><td class=line>
</td></tr>
<tr><td class=line-number>1344</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>params</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_empty</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1345</td><td class=line>            <span style='color: #5f00d7'>match</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>params</span><span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parsed_type</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1346</td><td class=line>                <span style='color: #af8700'>ParsedType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>JaktArray</span><span style='color: #4e4e4e'>(</span>inner<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1347</td><td class=line>                    <span style='color: #5f00d7'>match</span> inner <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1348</td><td class=line>                        <span style='color: #af8700'>ParsedType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Name</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1349</td><td class=line>                            <span style='color: #5f00d7'>if</span> <span style='color: #4e4e4e'>(</span>name != <span style='color: #008700'>&quot;String&quot;</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1350</td><td class=line>                                <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>param_type_error<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1351</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1352</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1353</td><td class=line>                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1354</td><td class=line>                            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>param_type_error<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1355</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1356</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1357</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1358</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1359</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>param_type_error<span style='color: #4e4e4e'>,</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name_span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1360</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1361</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1362</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1363</td><td class=line>
</td></tr>
<tr><td class=line-number>1364</td><td class=line>        <span style='color: #5f00d7'>let</span> return_type_error = <span style='color: #008700'>&quot;Main function must return c_int&quot;</span>
</td></tr>
<tr><td class=line-number>1365</td><td class=line>        <span style='color: #5f00d7'>match</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>return_type</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1366</td><td class=line>            <span style='color: #af8700'>ParsedType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Empty</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1367</td><td class=line>            <span style='color: #af8700'>ParsedType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Name</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1368</td><td class=line>                <span style='color: #5f00d7'>if</span> name != <span style='color: #008700'>&quot;c_int&quot;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1369</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>return_type_error<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1370</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1371</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1372</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1373</td><td class=line>                <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>return_type_error<span style='color: #4e4e4e'>,</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>return_type_span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1374</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1375</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1376</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1377</td><td class=line>
</td></tr>
<tr><td class=line-number>1378</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_function</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_function</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedFunction</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parent_scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1379</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>generic_parameters</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_empty</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> <span style='color: #5f00d7'>not</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>must_instantiate</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1380</td><td class=line>            <span style='color: #5f00d7'>return</span>
</td></tr>
<tr><td class=line-number>1381</td><td class=line>        <span style='color: #4e4e4e'>}</span> 
</td></tr>
<tr><td class=line-number>1382</td><td class=line>
</td></tr>
<tr><td class=line-number>1383</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// FIXME: Optional.expect(&quot;...&quot;) would be nicer here.</span>
</td></tr>
<tr><td class=line-number>1384</td><td class=line>        <span style='color: #5f00d7'>let</span> function_id = <span style='color: #4e4e4e'>.</span>find_function_in_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>,</span> function_name<span style='color: #4e4e4e'>:</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1385</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> function_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1386</td><td class=line>            <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Internal error: missing previously defined function&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1387</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1388</td><td class=line>        <span style='color: #5f00d7'>if</span> parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span> == <span style='color: #008700'>&quot;main&quot;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1389</td><td class=line>            <span style='color: #4e4e4e'>.</span>typecheck_jakt_main<span style='color: #4e4e4e'>(</span>parsed_function<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1390</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1391</td><td class=line>        <span style='color: #5f00d7'>mut</span> checked_function = <span style='color: #4e4e4e'>.</span>get_function<span style='color: #4e4e4e'>(</span>function_id<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1392</td><td class=line>        <span style='color: #5f00d7'>let</span> function_scope_id = checked_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>function_scope_id</span>
</td></tr>
<tr><td class=line-number>1393</td><td class=line>        <span style='color: #5f00d7'>let</span> function_linkage = checked_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>linkage</span>
</td></tr>
<tr><td class=line-number>1394</td><td class=line>
</td></tr>
<tr><td class=line-number>1395</td><td class=line>        <span style='color: #5f00d7'>mut</span> param_vars<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedVariable</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1396</td><td class=line>
</td></tr>
<tr><td class=line-number>1397</td><td class=line>        <span style='color: #5f00d7'>for</span> param <span style='color: #5f00d7'>in</span> checked_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>params</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1398</td><td class=line>            param_vars<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>param<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1399</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1400</td><td class=line>
</td></tr>
<tr><td class=line-number>1401</td><td class=line>        <span style='color: #5f00d7'>for</span> variable <span style='color: #5f00d7'>in</span> param_vars<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1402</td><td class=line>            <span style='color: #5f00d7'>mut</span> module = <span style='color: #4e4e4e'>.</span>current_module<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1403</td><td class=line>            <span style='color: #5f00d7'>let</span> var_id = module<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>add_variable</span><span style='color: #4e4e4e'>(</span>variable<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1404</td><td class=line>            <span style='color: #4e4e4e'>.</span>add_var_to_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>:</span> function_scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> variable<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>,</span> var_id<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>:</span> variable<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>definition_span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1405</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1406</td><td class=line>
</td></tr>
<tr><td class=line-number>1407</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// TODO: Resolve concreete types</span>
</td></tr>
<tr><td class=line-number>1408</td><td class=line>
</td></tr>
<tr><td class=line-number>1409</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// TODO: Typecheck function block</span>
</td></tr>
<tr><td class=line-number>1410</td><td class=line>        checked_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>block</span> = <span style='color: #4e4e4e'>.</span>typecheck_block<span style='color: #4e4e4e'>(</span>parsed_function<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>block</span><span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> function_scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>SafetyMode</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Safe</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1411</td><td class=line>
</td></tr>
<tr><td class=line-number>1412</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// TODO: Typecheck return type a second time to resolve generics</span>
</td></tr>
<tr><td class=line-number>1413</td><td class=line>
</td></tr>
<tr><td class=line-number>1414</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// TODO: Infer return type if necessary</span>
</td></tr>
<tr><td class=line-number>1415</td><td class=line>
</td></tr>
<tr><td class=line-number>1416</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// TODO: Report if control reaches end of non-void function</span>
</td></tr>
<tr><td class=line-number>1417</td><td class=line>
</td></tr>
<tr><td class=line-number>1418</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// TODO: Assign checked block and return type to checked_function</span>
</td></tr>
<tr><td class=line-number>1419</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1420</td><td class=line>
</td></tr>
<tr><td class=line-number>1421</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_block</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>parsed_block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedBlock</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parent_scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedBlock</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1422</td><td class=line>        <span style='color: #5f00d7'>let</span> parent_throws = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>can_throw</span>
</td></tr>
<tr><td class=line-number>1423</td><td class=line>        <span style='color: #5f00d7'>let</span> block_scope_id = <span style='color: #4e4e4e'>.</span>create_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>,</span> can_throw<span style='color: #4e4e4e'>:</span> parent_throws<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1424</td><td class=line>        <span style='color: #5f00d7'>let</span> none_type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1425</td><td class=line>        <span style='color: #5f00d7'>mut</span> checked_block = <span style='color: #af8700'>CheckedBlock</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1426</td><td class=line>            statements<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1427</td><td class=line>            scope_id<span style='color: #4e4e4e'>:</span> block_scope_id
</td></tr>
<tr><td class=line-number>1428</td><td class=line>            definitely_returns<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>1429</td><td class=line>            yielded_type<span style='color: #4e4e4e'>:</span> none_type_id
</td></tr>
<tr><td class=line-number>1430</td><td class=line>        <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1431</td><td class=line>
</td></tr>
<tr><td class=line-number>1432</td><td class=line>        <span style='color: #5f00d7'>for</span> parsed_statement <span style='color: #5f00d7'>in</span> parsed_block<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>stmts</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1433</td><td class=line>            checked_block<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>statements</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>typecheck_statement<span style='color: #4e4e4e'>(</span>parsed_statement<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>:</span> block_scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1434</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1435</td><td class=line>
</td></tr>
<tr><td class=line-number>1436</td><td class=line>        <span style='color: #5f00d7'>return</span> checked_block
</td></tr>
<tr><td class=line-number>1437</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1438</td><td class=line>
</td></tr>
<tr><td class=line-number>1439</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_typename</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_type</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedType</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>TypeId</span> <span style='color: #4e4e4e'>{</span> 
</td></tr>
<tr><td class=line-number>1440</td><td class=line>        <span style='color: #5f00d7'>match</span> parsed_type <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1441</td><td class=line>            <span style='color: #af8700'>NamespacedName</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>,</span> namespaces<span style='color: #4e4e4e'>,</span> params<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1442</td><td class=line>                <span style='color: #5f00d7'>mut</span> current_namespace_scope_id = scope_id
</td></tr>
<tr><td class=line-number>1443</td><td class=line>
</td></tr>
<tr><td class=line-number>1444</td><td class=line>                <span style='color: #5f00d7'>for</span> ns <span style='color: #5f00d7'>in</span> namespaces<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1445</td><td class=line>                    <span style='color: #5f00d7'>let</span> result = <span style='color: #4e4e4e'>.</span>find_namespace_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>:</span> current_namespace_scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> ns<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1446</td><td class=line>
</td></tr>
<tr><td class=line-number>1447</td><td class=line>                    <span style='color: #5f00d7'>if</span> result<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1448</td><td class=line>                        current_namespace_scope_id = result<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>1449</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1450</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Unknown namespace: &#39;{}&#39;&quot;</span><span style='color: #4e4e4e'>,</span> ns<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1451</td><td class=line>                        <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>new_inference<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1452</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1453</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1454</td><td class=line>
</td></tr>
<tr><td class=line-number>1455</td><td class=line>                <span style='color: #5f00d7'>mut</span> generic_args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1456</td><td class=line>
</td></tr>
<tr><td class=line-number>1457</td><td class=line>                <span style='color: #5f00d7'>for</span> param <span style='color: #5f00d7'>in</span> params<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1458</td><td class=line>                    <span style='color: #5f00d7'>let</span> checked_arg = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> param<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1459</td><td class=line>
</td></tr>
<tr><td class=line-number>1460</td><td class=line>                    generic_args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>checked_arg<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1461</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1462</td><td class=line>
</td></tr>
<tr><td class=line-number>1463</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// TODO: add synthetic type_name and generic support</span>
</td></tr>
<tr><td class=line-number>1464</td><td class=line>
</td></tr>
<tr><td class=line-number>1465</td><td class=line>                <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1466</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1467</td><td class=line>            <span style='color: #af8700'>Name</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1468</td><td class=line>                <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>match</span> name <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1469</td><td class=line>                    <span style='color: #008700'>&quot;i8&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1470</td><td class=line>                    <span style='color: #008700'>&quot;i16&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I16</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1471</td><td class=line>                    <span style='color: #008700'>&quot;i32&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1472</td><td class=line>                    <span style='color: #008700'>&quot;i64&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1473</td><td class=line>                    <span style='color: #008700'>&quot;u8&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U8</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1474</td><td class=line>                    <span style='color: #008700'>&quot;u16&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U16</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1475</td><td class=line>                    <span style='color: #008700'>&quot;u32&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1476</td><td class=line>                    <span style='color: #008700'>&quot;u64&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1477</td><td class=line>                    <span style='color: #008700'>&quot;f32&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>F32</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1478</td><td class=line>                    <span style='color: #008700'>&quot;f64&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>F64</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1479</td><td class=line>                    <span style='color: #008700'>&quot;c_char&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>CChar</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1480</td><td class=line>                    <span style='color: #008700'>&quot;c_int&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>CInt</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1481</td><td class=line>                    <span style='color: #008700'>&quot;usize&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Usize</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1482</td><td class=line>                    <span style='color: #008700'>&quot;String&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>String</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1483</td><td class=line>                    <span style='color: #008700'>&quot;bool&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1484</td><td class=line>                    <span style='color: #008700'>&quot;void&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Void</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1485</td><td class=line>                    <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1486</td><td class=line>                        <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_type_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1487</td><td class=line>
</td></tr>
<tr><td class=line-number>1488</td><td class=line>                        <span style='color: #5f00d7'>if</span> type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1489</td><td class=line>                            <span style='color: #5f00d7'>return</span> type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1490</td><td class=line>                        <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1491</td><td class=line>                            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Unknown type {}&quot;</span><span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1492</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>new_inference<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1493</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1494</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1495</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1496</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1497</td><td class=line>            <span style='color: #af8700'>Empty</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1498</td><td class=line>                <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>new_inference<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1499</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1500</td><td class=line>            <span style='color: #af8700'>JaktTuple</span><span style='color: #4e4e4e'>(</span>types<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1501</td><td class=line>                <span style='color: #5f00d7'>mut</span> checked_types<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1502</td><td class=line>                <span style='color: #5f00d7'>for</span> parsed_type <span style='color: #5f00d7'>in</span> types<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1503</td><td class=line>                    checked_types<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1504</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1505</td><td class=line>                <span style='color: #5f00d7'>let</span> tuple_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Tuple&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1506</td><td class=line>
</td></tr>
<tr><td class=line-number>1507</td><td class=line>                <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> tuple_struct_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> checked_types<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1508</td><td class=line>
</td></tr>
<tr><td class=line-number>1509</td><td class=line>                <span style='color: #5f00d7'>return</span> type_id
</td></tr>
<tr><td class=line-number>1510</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1511</td><td class=line>            <span style='color: #af8700'>JaktArray</span><span style='color: #4e4e4e'>(</span>inner<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1512</td><td class=line>                <span style='color: #5f00d7'>let</span> inner_type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> inner<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1513</td><td class=line>
</td></tr>
<tr><td class=line-number>1514</td><td class=line>                <span style='color: #5f00d7'>let</span> array_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Array&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1515</td><td class=line>
</td></tr>
<tr><td class=line-number>1516</td><td class=line>                <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> array_struct_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>inner_type_id<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1517</td><td class=line>
</td></tr>
<tr><td class=line-number>1518</td><td class=line>                <span style='color: #5f00d7'>return</span> type_id
</td></tr>
<tr><td class=line-number>1519</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1520</td><td class=line>            <span style='color: #af8700'>Dictionary</span><span style='color: #4e4e4e'>(</span>key<span style='color: #4e4e4e'>,</span> value<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1521</td><td class=line>                <span style='color: #5f00d7'>let</span> key_type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> key<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1522</td><td class=line>                <span style='color: #5f00d7'>let</span> value_type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> value<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1523</td><td class=line>
</td></tr>
<tr><td class=line-number>1524</td><td class=line>                <span style='color: #5f00d7'>let</span> dict_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Dictionary&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1525</td><td class=line>
</td></tr>
<tr><td class=line-number>1526</td><td class=line>                <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> dict_struct_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>key_type_id<span style='color: #4e4e4e'>,</span> value_type_id<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1527</td><td class=line>
</td></tr>
<tr><td class=line-number>1528</td><td class=line>                <span style='color: #5f00d7'>return</span> type_id
</td></tr>
<tr><td class=line-number>1529</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1530</td><td class=line>            <span style='color: #af8700'>Set</span><span style='color: #4e4e4e'>(</span>inner<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1531</td><td class=line>                <span style='color: #5f00d7'>let</span> inner_type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> inner<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1532</td><td class=line>
</td></tr>
<tr><td class=line-number>1533</td><td class=line>                <span style='color: #5f00d7'>let</span> set_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Set&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1534</td><td class=line>
</td></tr>
<tr><td class=line-number>1535</td><td class=line>                <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> set_struct_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>inner_type_id<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1536</td><td class=line>
</td></tr>
<tr><td class=line-number>1537</td><td class=line>                <span style='color: #5f00d7'>return</span> type_id
</td></tr>
<tr><td class=line-number>1538</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1539</td><td class=line>            <span style='color: #af8700'>Optional</span><span style='color: #4e4e4e'>(</span>inner<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1540</td><td class=line>                <span style='color: #5f00d7'>let</span> inner_type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> inner<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1541</td><td class=line>
</td></tr>
<tr><td class=line-number>1542</td><td class=line>                <span style='color: #5f00d7'>let</span> optional_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Optional&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1543</td><td class=line>
</td></tr>
<tr><td class=line-number>1544</td><td class=line>                <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> optional_struct_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>inner_type_id<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1545</td><td class=line>
</td></tr>
<tr><td class=line-number>1546</td><td class=line>                <span style='color: #5f00d7'>return</span> type_id
</td></tr>
<tr><td class=line-number>1547</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1548</td><td class=line>            <span style='color: #af8700'>WeakPtr</span><span style='color: #4e4e4e'>(</span>inner<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1549</td><td class=line>                <span style='color: #5f00d7'>let</span> inner_type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> inner<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1550</td><td class=line>
</td></tr>
<tr><td class=line-number>1551</td><td class=line>                <span style='color: #5f00d7'>let</span> weakptr_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;WeakPtr&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1552</td><td class=line>
</td></tr>
<tr><td class=line-number>1553</td><td class=line>                <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> weakptr_struct_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>inner_type_id<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1554</td><td class=line>
</td></tr>
<tr><td class=line-number>1555</td><td class=line>                <span style='color: #5f00d7'>return</span> type_id
</td></tr>
<tr><td class=line-number>1556</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1557</td><td class=line>            <span style='color: #af8700'>RawPtr</span><span style='color: #4e4e4e'>(</span>inner<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1558</td><td class=line>                <span style='color: #5f00d7'>let</span> inner_type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> inner<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1559</td><td class=line>
</td></tr>
<tr><td class=line-number>1560</td><td class=line>                <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>RawPtr</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> inner_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1561</td><td class=line>
</td></tr>
<tr><td class=line-number>1562</td><td class=line>                <span style='color: #5f00d7'>return</span> type_id
</td></tr>
<tr><td class=line-number>1563</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1564</td><td class=line>            <span style='color: #af8700'>GenericType</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>,</span> generic_parameters<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1565</td><td class=line>                <span style='color: #5f00d7'>mut</span> checked_inner_types<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1566</td><td class=line>
</td></tr>
<tr><td class=line-number>1567</td><td class=line>                <span style='color: #5f00d7'>for</span> inner_type <span style='color: #5f00d7'>in</span> generic_parameters<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1568</td><td class=line>                    <span style='color: #5f00d7'>let</span> inner_type_id = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1569</td><td class=line>                    checked_inner_types<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>inner_type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1570</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1571</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// FIXME: add support for &quot;GenericResolvedType&quot;, though the Rust version</span>
</td></tr>
<tr><td class=line-number>1572</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// puts this in the parser even though it should be in the typechecker</span>
</td></tr>
<tr><td class=line-number>1573</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// as the parser doesn&#39;t have a concept of type ids</span>
</td></tr>
<tr><td class=line-number>1574</td><td class=line>                <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>new_inference<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1575</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1576</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1577</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// FIXME: This is unreachable but the generated C++ causes a warning.</span>
</td></tr>
<tr><td class=line-number>1578</td><td class=line>        <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;should be unreachable&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1579</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>new_inference<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1580</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1581</td><td class=line>
</td></tr>
<tr><td class=line-number>1582</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_binary_operation</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>checked_lhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>op</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>BinaryOperator</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>checked_rhs</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>TypeId</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1583</td><td class=line>        <span style='color: #5f00d7'>let</span> lhs_type_id = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_lhs<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1584</td><td class=line>        <span style='color: #5f00d7'>let</span> rhs_type_id = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_rhs<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1585</td><td class=line>
</td></tr>
<tr><td class=line-number>1586</td><td class=line>        <span style='color: #5f00d7'>let</span> lhs_span = <span style='color: #4e4e4e'>.</span>expression_span<span style='color: #4e4e4e'>(</span>checked_lhs<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1587</td><td class=line>        <span style='color: #5f00d7'>let</span> rhs_span = <span style='color: #4e4e4e'>.</span>expression_span<span style='color: #4e4e4e'>(</span>checked_rhs<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1588</td><td class=line>
</td></tr>
<tr><td class=line-number>1589</td><td class=line>        <span style='color: #5f00d7'>mut</span> type_id = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_lhs<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1590</td><td class=line>
</td></tr>
<tr><td class=line-number>1591</td><td class=line>        <span style='color: #5f00d7'>match</span> op <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1592</td><td class=line>            <span style='color: #af8700'>NoneCoalescing</span> | <span style='color: #af8700'>NoneCoalescingAssign</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1593</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// 1. LHS must be Optional&lt;T&gt;.</span>
</td></tr>
<tr><td class=line-number>1594</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// 2. RHS must be Optional&lt;T&gt; or T.</span>
</td></tr>
<tr><td class=line-number>1595</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// 3. Resulting type is Optional&lt;T&gt; or T, respectively.</span>
</td></tr>
<tr><td class=line-number>1596</td><td class=line>
</td></tr>
<tr><td class=line-number>1597</td><td class=line>                <span style='font-style: italic;color: #8a8a8a'>// if an assignment, the LHS must be a mutable variable.</span>
</td></tr>
<tr><td class=line-number>1598</td><td class=line>                <span style='color: #5f00d7'>if</span> op is <span style='color: #af8700'>NoneCoalescingAssign</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1599</td><td class=line>                    <span style='color: #5f00d7'>match</span> checked_lhs <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1600</td><td class=line>                        <span style='color: #af8700'>Var</span><span style='color: #4e4e4e'>(</span>var<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1601</td><td class=line>                            <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>is_mutable</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1602</td><td class=line>                                <span style='color: #4e4e4e'>.</span>error_with_hint<span style='color: #4e4e4e'>(</span>message<span style='color: #4e4e4e'>:</span> <span style='color: #008700'>&quot;left-hand side of ??= must be a mutable variable&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> hint<span style='color: #4e4e4e'>:</span> <span style='color: #008700'>&quot;This variable isn&#39;t marked as mutable&quot;</span><span style='color: #4e4e4e'>,</span> hint_span<span style='color: #4e4e4e'>:</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>definition_span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1603</td><td class=line>                                <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>new_inference<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1604</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1605</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1606</td><td class=line>                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1607</td><td class=line>                            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>message<span style='color: #4e4e4e'>:</span> <span style='color: #008700'>&quot;left-hand side of ??= must be a mutable variable&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1608</td><td class=line>                            <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>new_inference<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1609</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1610</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1611</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1612</td><td class=line>
</td></tr>
<tr><td class=line-number>1613</td><td class=line>                <span style='color: #5f00d7'>match</span> <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1614</td><td class=line>                    <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1615</td><td class=line>                        <span style='color: #5f00d7'>let</span> optional_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Optional&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1616</td><td class=line>
</td></tr>
<tr><td class=line-number>1617</td><td class=line>                        <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>optional_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1618</td><td class=line>                            <span style='font-style: italic;color: #8a8a8a'>// Success: LHS is T? and RHS is T?.</span>
</td></tr>
<tr><td class=line-number>1619</td><td class=line>                            <span style='color: #5f00d7'>if</span> lhs_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1620</td><td class=line>                                <span style='color: #5f00d7'>return</span> lhs_type_id
</td></tr>
<tr><td class=line-number>1621</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1622</td><td class=line>
</td></tr>
<tr><td class=line-number>1623</td><td class=line>                            <span style='font-style: italic;color: #8a8a8a'>// Extract T from Optional&lt;T&gt;.</span>
</td></tr>
<tr><td class=line-number>1624</td><td class=line>                            <span style='color: #5f00d7'>let</span> inner_type_id = args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1625</td><td class=line>
</td></tr>
<tr><td class=line-number>1626</td><td class=line>                            <span style='color: #5f00d7'>if</span> inner_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1627</td><td class=line>                                <span style='font-style: italic;color: #8a8a8a'>// Success: LHS is T? and RHS is T.</span>
</td></tr>
<tr><td class=line-number>1628</td><td class=line>                                <span style='color: #5f00d7'>return</span> inner_type_id
</td></tr>
<tr><td class=line-number>1629</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1630</td><td class=line>                        <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1631</td><td class=line>                            <span style='color: #4e4e4e'>.</span>error_with_hint<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1632</td><td class=line>                                <span style='color: #008700'>&quot;None coalescing (??) with incompatible types ({} and {})&quot;</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1633</td><td class=line>                                <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1634</td><td class=line>                                <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1635</td><td class=line>                            <span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1636</td><td class=line>                            <span style='color: #008700'>&quot;Left side of ?? must be an Optional but isn&#39;t&quot;</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1637</td><td class=line>                            lhs_span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1638</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1639</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1640</td><td class=line>                    <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1641</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error_with_hint<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1642</td><td class=line>                            <span style='color: #008700'>&quot;None coalescing (??) with incompatible types ({} and {})&quot;</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1643</td><td class=line>                            <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1644</td><td class=line>                            <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1645</td><td class=line>                        <span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1646</td><td class=line>                        <span style='color: #008700'>&quot;Left side of ?? must be an Optional but isn&#39;t&quot;</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1647</td><td class=line>                        lhs_span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1648</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1649</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1650</td><td class=line>
</td></tr>
<tr><td class=line-number>1651</td><td class=line>                <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1652</td><td class=line>                    <span style='color: #008700'>&quot;None coalescing (??) with incompatible types ({} and {})&quot;</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1653</td><td class=line>                    <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1654</td><td class=line>                    <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1655</td><td class=line>                <span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1656</td><td class=line>
</td></tr>
<tr><td class=line-number>1657</td><td class=line>                <span style='color: #5f00d7'>return</span> lhs_type_id
</td></tr>
<tr><td class=line-number>1658</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1659</td><td class=line>            <span style='color: #af8700'>LessThan</span> | <span style='color: #af8700'>LessThanOrEqual</span> | <span style='color: #af8700'>GreaterThan</span> | <span style='color: #af8700'>GreaterThanOrEqual</span> | <span style='color: #af8700'>Equal</span> | <span style='color: #af8700'>NotEqual</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1660</td><td class=line>                <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> lhs_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1661</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Binary comparison between incompatible types ({} vs {})&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1662</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1663</td><td class=line>
</td></tr>
<tr><td class=line-number>1664</td><td class=line>                type_id = <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1665</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1666</td><td class=line>            <span style='color: #af8700'>LogicalAnd</span> | <span style='color: #af8700'>LogicalOr</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1667</td><td class=line>                <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> lhs_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1668</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;left side of logical binary operation is not a boolean&quot;</span><span style='color: #4e4e4e'>,</span> lhs_span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1669</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1670</td><td class=line>
</td></tr>
<tr><td class=line-number>1671</td><td class=line>                <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> rhs_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1672</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;right side of logical binary operation is not a boolean&quot;</span><span style='color: #4e4e4e'>,</span> rhs_span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1673</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1674</td><td class=line>
</td></tr>
<tr><td class=line-number>1675</td><td class=line>                type_id = <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1676</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1677</td><td class=line>            <span style='color: #af8700'>Assign</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1678</td><td class=line>                <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> <span style='color: #4e4e4e'>.</span>expression_is_mutable<span style='color: #4e4e4e'>(</span>checked_lhs<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1679</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;assignment to immutable variable&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1680</td><td class=line>                    <span style='color: #5f00d7'>return</span> lhs_type_id
</td></tr>
<tr><td class=line-number>1681</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1682</td><td class=line>                <span style='color: #5f00d7'>match</span> checked_rhs <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1683</td><td class=line>                    <span style='color: #af8700'>OptionalNone</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1684</td><td class=line>                        <span style='color: #5f00d7'>let</span> lhs_type = <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1685</td><td class=line>                        <span style='color: #5f00d7'>let</span> optional_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Optional&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1686</td><td class=line>
</td></tr>
<tr><td class=line-number>1687</td><td class=line>                        <span style='color: #5f00d7'>match</span> lhs_type <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1688</td><td class=line>                            <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1689</td><td class=line>                                <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>optional_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1690</td><td class=line>                                    <span style='color: #5f00d7'>return</span> lhs_type_id
</td></tr>
<tr><td class=line-number>1691</td><td class=line>                                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1692</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1693</td><td class=line>                            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1694</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1695</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1696</td><td class=line>                    <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1697</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1698</td><td class=line>
</td></tr>
<tr><td class=line-number>1699</td><td class=line>                <span style='color: #5f00d7'>let</span> result = <span style='color: #4e4e4e'>.</span>unify<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>:</span> rhs_type_id<span style='color: #4e4e4e'>,</span> lhs_span<span style='color: #4e4e4e'>:</span> rhs_span<span style='color: #4e4e4e'>,</span> rhs<span style='color: #4e4e4e'>:</span> lhs_type_id<span style='color: #4e4e4e'>,</span> rhs_span<span style='color: #4e4e4e'>:</span> lhs_span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1700</td><td class=line>                <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> result<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1701</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Assignment between incompatible types ({} and {})&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1702</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1703</td><td class=line>                <span style='color: #5f00d7'>return</span> result<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>value_or</span><span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1704</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1705</td><td class=line>            <span style='color: #af8700'>AddAssign</span> | <span style='color: #af8700'>SubtractAssign</span> | <span style='color: #af8700'>MultiplyAssign</span> | <span style='color: #af8700'>DivideAssign</span> | <span style='color: #af8700'>ModuloAssign</span> | <span style='color: #af8700'>BitwiseAndAssign</span> | <span style='color: #af8700'>BitwiseOrAssign</span> | <span style='color: #af8700'>BitwiseXorAssign</span> | <span style='color: #af8700'>BitwiseLeftShiftAssign</span> | <span style='color: #af8700'>BitwiseRightShiftAssign</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1706</td><td class=line>                <span style='color: #5f00d7'>let</span> weak_ptr_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;WeakPtr&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1707</td><td class=line>
</td></tr>
<tr><td class=line-number>1708</td><td class=line>                <span style='color: #5f00d7'>match</span> <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1709</td><td class=line>                    <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1710</td><td class=line>                        <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>weak_ptr_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1711</td><td class=line>                            <span style='color: #5f00d7'>let</span> inner_type_id = args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1712</td><td class=line>                            <span style='color: #5f00d7'>match</span> <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>inner_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1713</td><td class=line>                                <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Struct</span><span style='color: #4e4e4e'>(</span>struct_id<span style='color: #4e4e4e'>:</span> lhs_struct_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1714</td><td class=line>                                    <span style='color: #5f00d7'>match</span> <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1715</td><td class=line>                                        <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Struct</span><span style='color: #4e4e4e'>(</span>struct_id<span style='color: #4e4e4e'>:</span> rhs_struct_id<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1716</td><td class=line>                                            <span style='color: #5f00d7'>if</span> lhs_struct_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1717</td><td class=line>                                                <span style='color: #5f00d7'>return</span> lhs_type_id
</td></tr>
<tr><td class=line-number>1718</td><td class=line>                                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1719</td><td class=line>                                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1720</td><td class=line>                                        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1721</td><td class=line>                                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1722</td><td class=line>                                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1723</td><td class=line>                                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1724</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1725</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1726</td><td class=line>
</td></tr>
<tr><td class=line-number>1727</td><td class=line>                        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> lhs_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1728</td><td class=line>                            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1729</td><td class=line>                                <span style='color: #008700'>&quot;Assignment between incompatible types ({} and {})&quot;</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1730</td><td class=line>                                <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1731</td><td class=line>                                <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1732</td><td class=line>                            <span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1733</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1734</td><td class=line>
</td></tr>
<tr><td class=line-number>1735</td><td class=line>                        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> <span style='color: #4e4e4e'>.</span>expression_is_mutable<span style='color: #4e4e4e'>(</span>checked_lhs<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1736</td><td class=line>                            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Assignment to immutbale variable&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1737</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1738</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1739</td><td class=line>                    <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1740</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1741</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1742</td><td class=line>            <span style='color: #af8700'>Add</span> | <span style='color: #af8700'>Subtract</span> | <span style='color: #af8700'>Multiply</span> | <span style='color: #af8700'>Divide</span> | <span style='color: #af8700'>Modulo</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1743</td><td class=line>                <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> lhs_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1744</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1745</td><td class=line>                        <span style='color: #008700'>&quot;Binary arithmetic operation between incompatible types ({} and {})&quot;</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1746</td><td class=line>                        <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1747</td><td class=line>                        <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1748</td><td class=line>                    <span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>1749</td><td class=line>                    span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1750</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1751</td><td class=line>
</td></tr>
<tr><td class=line-number>1752</td><td class=line>                type_id = lhs_type_id
</td></tr>
<tr><td class=line-number>1753</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1754</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1755</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1756</td><td class=line>
</td></tr>
<tr><td class=line-number>1757</td><td class=line>        <span style='color: #5f00d7'>return</span> type_id
</td></tr>
<tr><td class=line-number>1758</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1759</td><td class=line>
</td></tr>
<tr><td class=line-number>1760</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_statement</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>statement</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedStatement</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> statement <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1761</td><td class=line>        <span style='color: #af8700'>Expression</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Expression</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1762</td><td class=line>        <span style='color: #af8700'>UnsafeBlock</span><span style='color: #4e4e4e'>(</span>parsed_block<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Block</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>typecheck_block<span style='color: #4e4e4e'>(</span>parsed_block<span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>SafetyMode</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Unsafe</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1763</td><td class=line>        <span style='color: #af8700'>Yield</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Yield</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1764</td><td class=line>        <span style='color: #af8700'>Return</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_return<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1765</td><td class=line>        <span style='color: #af8700'>Block</span><span style='color: #4e4e4e'>(</span>parsed_block<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_block_statement<span style='color: #4e4e4e'>(</span>parsed_block<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1766</td><td class=line>        <span style='color: #af8700'>InlineCpp</span><span style='color: #4e4e4e'>(</span>block<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_inline_cpp<span style='color: #4e4e4e'>(</span>block<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1767</td><td class=line>        <span style='color: #af8700'>Defer</span><span style='color: #4e4e4e'>(</span>statement<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_defer<span style='color: #4e4e4e'>(</span>statement<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1768</td><td class=line>        <span style='color: #af8700'>Loop</span><span style='color: #4e4e4e'>(</span>parsed_block<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_loop<span style='color: #4e4e4e'>(</span>parsed_block<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1769</td><td class=line>        <span style='color: #af8700'>Try</span><span style='color: #4e4e4e'>(</span>stmt<span style='color: #4e4e4e'>,</span> error_name<span style='color: #4e4e4e'>,</span> error_span<span style='color: #4e4e4e'>,</span> catch_block<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_try<span style='color: #4e4e4e'>(</span>stmt<span style='color: #4e4e4e'>,</span> error_name<span style='color: #4e4e4e'>,</span> error_span<span style='color: #4e4e4e'>,</span> catch_block<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1770</td><td class=line>        <span style='color: #af8700'>Throw</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_throw<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1771</td><td class=line>        <span style='color: #af8700'>While</span><span style='color: #4e4e4e'>(</span>guard<span style='color: #4e4e4e'>,</span> block<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_while<span style='color: #4e4e4e'>(</span>guard<span style='color: #4e4e4e'>,</span> block<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1772</td><td class=line>        <span style='color: #af8700'>Continue</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Continue</span>
</td></tr>
<tr><td class=line-number>1773</td><td class=line>        <span style='color: #af8700'>Break</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Break</span>
</td></tr>
<tr><td class=line-number>1774</td><td class=line>        <span style='color: #af8700'>VarDecl</span><span style='color: #4e4e4e'>(</span>var<span style='color: #4e4e4e'>,</span> init<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_var_decl<span style='color: #4e4e4e'>(</span>var<span style='color: #4e4e4e'>,</span> init<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1775</td><td class=line>        <span style='color: #af8700'>If</span><span style='color: #4e4e4e'>(</span>condition<span style='color: #4e4e4e'>,</span> then_block<span style='color: #4e4e4e'>,</span> else_statement<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_if<span style='color: #4e4e4e'>(</span>condition<span style='color: #4e4e4e'>,</span> then_block<span style='color: #4e4e4e'>,</span> else_statement<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1776</td><td class=line>        <span style='color: #af8700'>Garbage</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Garbage</span>
</td></tr>
<tr><td class=line-number>1777</td><td class=line>        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1778</td><td class=line>            <span style='color: #005fd7'>todo</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;typecheck_statement else: {}&quot;</span><span style='color: #4e4e4e'>,</span> statement<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1779</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Garbage</span>
</td></tr>
<tr><td class=line-number>1780</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1781</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1782</td><td class=line>
</td></tr>
<tr><td class=line-number>1783</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_if</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>condition</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedExpression</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>then_block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedBlock</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>else_statement</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedStatement</span><span style='font-weight: bold;color: #4e4e4e'>?</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1784</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_guard = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>condition<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1785</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_guard<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1786</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Condition must be a boolean expression&quot;</span><span style='color: #4e4e4e'>,</span> condition<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1787</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1788</td><td class=line>
</td></tr>
<tr><td class=line-number>1789</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_block = <span style='color: #4e4e4e'>.</span>typecheck_block<span style='color: #4e4e4e'>(</span>then_block<span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1790</td><td class=line>        <span style='color: #5f00d7'>if</span> checked_block<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>yielded_type</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1791</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;An if block is not allowed to yield values&quot;</span><span style='color: #4e4e4e'>,</span> then_block<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>find_yield_span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1792</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1793</td><td class=line>
</td></tr>
<tr><td class=line-number>1794</td><td class=line>        <span style='color: #5f00d7'>mut</span> checked_else<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedStatement</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1795</td><td class=line>        <span style='color: #5f00d7'>match</span> else_statement<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1796</td><td class=line>            <span style='font-weight: bold;color: #875f00'>true</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1797</td><td class=line>                checked_else = <span style='color: #4e4e4e'>.</span>typecheck_statement<span style='color: #4e4e4e'>(</span>else_statement<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1798</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1799</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1800</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1801</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>If</span><span style='color: #4e4e4e'>(</span>guard<span style='color: #4e4e4e'>:</span> checked_guard<span style='color: #4e4e4e'>,</span> then_block<span style='color: #4e4e4e'>:</span> checked_block<span style='color: #4e4e4e'>,</span> else_statement<span style='color: #4e4e4e'>:</span> checked_else<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1802</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1803</td><td class=line>
</td></tr>
<tr><td class=line-number>1804</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_var_decl</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>var</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedVarDecl</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>init</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedExpression</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1805</td><td class=line>        <span style='color: #5f00d7'>mut</span> lhs = <span style='color: #4e4e4e'>.</span>typecheck_typename<span style='color: #4e4e4e'>(</span>parsed_type<span style='color: #4e4e4e'>:</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parsed_type</span><span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1806</td><td class=line>        <span style='color: #5f00d7'>mut</span> checked_expr = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>:</span> init<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1807</td><td class=line>        <span style='color: #5f00d7'>let</span> rhs = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1808</td><td class=line>        <span style='color: #5f00d7'>let</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span> = <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1809</td><td class=line>
</td></tr>
<tr><td class=line-number>1810</td><td class=line>        <span style='color: #5f00d7'>if</span> lhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>UNKNOWN_TYPE_ID</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> <span style='color: #5f00d7'>not</span> rhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>UNKNOWN_TYPE_ID</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1811</td><td class=line>            lhs = rhs
</td></tr>
<tr><td class=line-number>1812</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1813</td><td class=line>
</td></tr>
<tr><td class=line-number>1814</td><td class=line>        <span style='color: #5f00d7'>let</span> promoted_rhs = <span style='color: #4e4e4e'>.</span>try_to_promote_constant_expr_to_type<span style='color: #4e4e4e'>(</span>lhs_type<span style='color: #4e4e4e'>:</span> lhs<span style='color: #4e4e4e'>,</span> checked_rhs<span style='color: #4e4e4e'>:</span> checked_expr<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>:</span> init<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1815</td><td class=line>        <span style='color: #5f00d7'>if</span> promoted_rhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1816</td><td class=line>            checked_expr = promoted_rhs<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>1817</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1818</td><td class=line>
</td></tr>
<tr><td class=line-number>1819</td><td class=line>        <span style='color: #5f00d7'>let</span> weak_ptr_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;WeakPtr&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1820</td><td class=line>        <span style='color: #5f00d7'>let</span> optional_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Optional&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1821</td><td class=line>
</td></tr>
<tr><td class=line-number>1822</td><td class=line>        <span style='color: #5f00d7'>let</span> lhs_type = <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1823</td><td class=line>
</td></tr>
<tr><td class=line-number>1824</td><td class=line>        <span style='color: #5f00d7'>match</span> lhs_type <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1825</td><td class=line>            <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1826</td><td class=line>                <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>weak_ptr_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1827</td><td class=line>                    <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>is_mutable</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1828</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Weak reference must be mutable&quot;</span><span style='color: #4e4e4e'>,</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1829</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1830</td><td class=line>
</td></tr>
<tr><td class=line-number>1831</td><td class=line>                    <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> lhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> <span style='color: #5f00d7'>not</span> args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> <span style='color: #5f00d7'>not</span> rhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>UNKNOWN_TYPE_ID</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1832</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Type mismatch: expected {}, but got {}&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>expression_span<span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1833</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1834</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1835</td><td class=line>                <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>optional_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1836</td><td class=line>                    <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> lhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> <span style='color: #5f00d7'>not</span> args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> <span style='color: #5f00d7'>not</span> rhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>UNKNOWN_TYPE_ID</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1837</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Type mismatch: expected {}, but got {}&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>expression_span<span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1838</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1839</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1840</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1841</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1842</td><td class=line>                <span style='color: #5f00d7'>if</span> lhs_type<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>is_builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1843</td><td class=line>                    <span style='color: #5f00d7'>let</span> number_constant = checked_expr<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>to_number_constant</span><span style='color: #4e4e4e'>(</span>program<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1844</td><td class=line>
</td></tr>
<tr><td class=line-number>1845</td><td class=line>                    <span style='color: #5f00d7'>mut</span> is_rhs_zero = <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>1846</td><td class=line>                    <span style='color: #5f00d7'>if</span> number_constant<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1847</td><td class=line>                        is_rhs_zero = <span style='color: #5f00d7'>match</span> number_constant<span style='font-weight: bold;color: #4e4e4e'>!</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1848</td><td class=line>                            <span style='color: #af8700'>Signed</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> value == <span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>1849</td><td class=line>                            <span style='color: #af8700'>Unsigned</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> value == <span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>1850</td><td class=line>                            <span style='color: #af8700'>Floating</span><span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> value == <span style='font-weight: bold;color: #875f00'>0.0</span>
</td></tr>
<tr><td class=line-number>1851</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1852</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1853</td><td class=line>
</td></tr>
<tr><td class=line-number>1854</td><td class=line>                    <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> <span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>is_numeric<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>and</span> is_rhs_zero<span style='color: #4e4e4e'>)</span> and <span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>is_integer<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>)</span> ^ <span style='color: #4e4e4e'>.</span>is_integer<span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1855</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Type mismatch: expected {}, but got {}&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>expression_span<span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1856</td><td class=line>                        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Garbage</span>
</td></tr>
<tr><td class=line-number>1857</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1858</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1859</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1860</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1861</td><td class=line>
</td></tr>
<tr><td class=line-number>1862</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_var = <span style='color: #af8700'>CheckedVariable</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1863</td><td class=line>            name<span style='color: #4e4e4e'>:</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span>
</td></tr>
<tr><td class=line-number>1864</td><td class=line>            type_id<span style='color: #4e4e4e'>:</span> lhs
</td></tr>
<tr><td class=line-number>1865</td><td class=line>            is_mutable<span style='color: #4e4e4e'>:</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>is_mutable</span>
</td></tr>
<tr><td class=line-number>1866</td><td class=line>            definition_span<span style='color: #4e4e4e'>:</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>span</span>
</td></tr>
<tr><td class=line-number>1867</td><td class=line>        <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1868</td><td class=line>
</td></tr>
<tr><td class=line-number>1869</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// TODO: dump type hints</span>
</td></tr>
<tr><td class=line-number>1870</td><td class=line>
</td></tr>
<tr><td class=line-number>1871</td><td class=line>        <span style='color: #5f00d7'>mut</span> module = <span style='color: #4e4e4e'>.</span>current_module<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1872</td><td class=line>        <span style='color: #5f00d7'>let</span> var_id = module<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>add_variable</span><span style='color: #4e4e4e'>(</span>checked_var<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1873</td><td class=line>        <span style='color: #4e4e4e'>.</span>add_var_to_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>,</span> var_id<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>:</span> checked_var<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>definition_span</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1874</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>VarDecl</span><span style='color: #4e4e4e'>(</span>var_id<span style='color: #4e4e4e'>,</span> init<span style='color: #4e4e4e'>:</span> checked_expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1875</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1876</td><td class=line>
</td></tr>
<tr><td class=line-number>1877</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_while</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>guard</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedExpression</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedBlock</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1878</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_guard = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>guard<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1879</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_guard<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Bool</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1880</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Condition must be a boolean expression&quot;</span><span style='color: #4e4e4e'>,</span> guard<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1881</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1882</td><td class=line>
</td></tr>
<tr><td class=line-number>1883</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_block = <span style='color: #4e4e4e'>.</span>typecheck_block<span style='color: #4e4e4e'>(</span>block<span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1884</td><td class=line>        <span style='color: #5f00d7'>if</span> checked_block<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>yielded_type</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1885</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;A while block is not allowed to yield values&quot;</span><span style='color: #4e4e4e'>,</span> block<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>find_yield_span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1886</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1887</td><td class=line>
</td></tr>
<tr><td class=line-number>1888</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>While</span><span style='color: #4e4e4e'>(</span>guard<span style='color: #4e4e4e'>:</span> checked_guard<span style='color: #4e4e4e'>,</span> block<span style='color: #4e4e4e'>:</span> checked_block<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1889</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1890</td><td class=line>
</td></tr>
<tr><td class=line-number>1891</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_try</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>stmt</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedStatement</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>error_name</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>error_span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>catch_block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedBlock</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1892</td><td class=line>        <span style='color: #5f00d7'>let</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span> = <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1893</td><td class=line>        <span style='color: #5f00d7'>let</span> try_scope_id = <span style='color: #4e4e4e'>.</span>create_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>,</span> can_throw<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>true</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1894</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_stmt = <span style='color: #4e4e4e'>.</span>typecheck_statement<span style='color: #4e4e4e'>(</span>stmt<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1895</td><td class=line>        <span style='color: #5f00d7'>let</span> error_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Error&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1896</td><td class=line>        <span style='color: #5f00d7'>let</span> error_decl = <span style='color: #af8700'>CheckedVariable</span><span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>1897</td><td class=line>            name<span style='color: #4e4e4e'>:</span> error_name
</td></tr>
<tr><td class=line-number>1898</td><td class=line>            type_id<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span>
</td></tr>
<tr><td class=line-number>1899</td><td class=line>            is_mutable<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>1900</td><td class=line>            definition_span<span style='color: #4e4e4e'>:</span> error_span
</td></tr>
<tr><td class=line-number>1901</td><td class=line>        <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1902</td><td class=line>        <span style='color: #5f00d7'>mut</span> module = <span style='color: #4e4e4e'>.</span>current_module<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1903</td><td class=line>        <span style='color: #5f00d7'>let</span> error_id = module<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>add_variable</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>:</span> error_decl<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1904</td><td class=line>
</td></tr>
<tr><td class=line-number>1905</td><td class=line>        <span style='color: #5f00d7'>let</span> catch_scope_id = <span style='color: #4e4e4e'>.</span>create_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>,</span> can_throw<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>false</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1906</td><td class=line>        <span style='color: #4e4e4e'>.</span>add_var_to_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>:</span> catch_scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> error_name<span style='color: #4e4e4e'>,</span> var_id<span style='color: #4e4e4e'>:</span> error_id<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>:</span> error_span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1907</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_catch_block = <span style='color: #4e4e4e'>.</span>typecheck_block<span style='color: #4e4e4e'>(</span>catch_block<span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> catch_scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1908</td><td class=line>
</td></tr>
<tr><td class=line-number>1909</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Try</span><span style='color: #4e4e4e'>(</span>stmt<span style='color: #4e4e4e'>:</span> checked_stmt<span style='color: #4e4e4e'>,</span> error_name<span style='color: #4e4e4e'>,</span> catch_block<span style='color: #4e4e4e'>:</span> checked_catch_block<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1910</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1911</td><td class=line>
</td></tr>
<tr><td class=line-number>1912</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_throw</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedExpression</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1913</td><td class=line>
</td></tr>
<tr><td class=line-number>1914</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_expr = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1915</td><td class=line>
</td></tr>
<tr><td class=line-number>1916</td><td class=line>        <span style='color: #5f00d7'>let</span> error_type_id = <span style='color: #4e4e4e'>.</span>find_type_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Error&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1917</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>error_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1918</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;throw expression does not produce an error&quot;</span><span style='color: #4e4e4e'>,</span> expr<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1919</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1920</td><td class=line>
</td></tr>
<tr><td class=line-number>1921</td><td class=line>        <span style='color: #5f00d7'>let</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1922</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>can_throw</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1923</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Throw statment needs to be in a try statement or a function marked as throws&quot;</span><span style='color: #4e4e4e'>,</span> expr<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1924</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1925</td><td class=line>
</td></tr>
<tr><td class=line-number>1926</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Throw</span><span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1927</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1928</td><td class=line>
</td></tr>
<tr><td class=line-number>1929</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_loop</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedBlock</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1930</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_block = <span style='color: #4e4e4e'>.</span>typecheck_block<span style='color: #4e4e4e'>(</span>parsed_block<span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1931</td><td class=line>        <span style='color: #5f00d7'>if</span> checked_block<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>yielded_type</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1932</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;A loop block is not allowed to yield values&quot;</span><span style='color: #4e4e4e'>,</span> parsed_block<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>find_yield_span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1933</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1934</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Loop</span><span style='color: #4e4e4e'>(</span>checked_block<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1935</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1936</td><td class=line>
</td></tr>
<tr><td class=line-number>1937</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_defer</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>statement</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedStatement</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1938</td><td class=line>        <span style='color: #5f00d7'>let</span> was_inside_defer = <span style='color: #4e4e4e'>.</span>inside_defer
</td></tr>
<tr><td class=line-number>1939</td><td class=line>        <span style='color: #4e4e4e'>.</span>inside_defer = <span style='font-weight: bold;color: #875f00'>true</span>
</td></tr>
<tr><td class=line-number>1940</td><td class=line>        <span style='color: #5f00d7'>defer</span> <span style='color: #4e4e4e'>.</span>inside_defer = was_inside_defer
</td></tr>
<tr><td class=line-number>1941</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_statement = <span style='color: #4e4e4e'>.</span>typecheck_statement<span style='color: #4e4e4e'>(</span>statement<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1942</td><td class=line>        <span style='color: #5f00d7'>match</span> checked_statement <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1943</td><td class=line>            <span style='color: #af8700'>Block</span><span style='color: #4e4e4e'>(</span>block<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1944</td><td class=line>                <span style='color: #5f00d7'>if</span> block<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>yielded_type</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1945</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;yield inside defer is meaningless&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1946</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1947</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1948</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span> <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1949</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1950</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Defer</span><span style='color: #4e4e4e'>(</span>checked_statement<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1951</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1952</td><td class=line>
</td></tr>
<tr><td class=line-number>1953</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_block_statement</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>parsed_block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedBlock</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1954</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_block = <span style='color: #4e4e4e'>.</span>typecheck_block<span style='color: #4e4e4e'>(</span>parsed_block<span style='color: #4e4e4e'>,</span> parent_scope_id<span style='color: #4e4e4e'>:</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1955</td><td class=line>        <span style='color: #5f00d7'>if</span> checked_block<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>yielded_type</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1956</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;A block used as a statement cannot yield values, as the value cannot be observed in any way&quot;</span><span style='color: #4e4e4e'>,</span> parsed_block<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>find_yield_span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1957</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1958</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Block</span><span style='color: #4e4e4e'>(</span>checked_block<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1959</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1960</td><td class=line>
</td></tr>
<tr><td class=line-number>1961</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_inline_cpp</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>block</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedBlock</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1962</td><td class=line>
</td></tr>
<tr><td class=line-number>1963</td><td class=line>            <span style='color: #5f00d7'>match</span> safety_mode <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1964</td><td class=line>                <span style='color: #af8700'>Safe</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Use of inline cpp block outside of unsafe block&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1965</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1966</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1967</td><td class=line>
</td></tr>
<tr><td class=line-number>1968</td><td class=line>            <span style='color: #5f00d7'>mut</span> strings<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>1969</td><td class=line>            <span style='color: #5f00d7'>for</span> statement <span style='color: #5f00d7'>in</span> block<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>stmts</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1970</td><td class=line>                <span style='color: #5f00d7'>match</span> statement <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1971</td><td class=line>                    <span style='color: #af8700'>ParsedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Expression</span><span style='color: #4e4e4e'>(</span>expression<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1972</td><td class=line>                        <span style='color: #5f00d7'>match</span> expression <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1973</td><td class=line>                            <span style='color: #af8700'>ParsedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>QuotedString</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1974</td><td class=line>                                strings<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1975</td><td class=line>                            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1976</td><td class=line>                            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Expected block of strings&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1977</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1978</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1979</td><td class=line>                    <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1980</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Expected block of strings&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1981</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1982</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1983</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1984</td><td class=line>
</td></tr>
<tr><td class=line-number>1985</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>InlineCpp</span><span style='color: #4e4e4e'>(</span>strings<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1986</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1987</td><td class=line>
</td></tr>
<tr><td class=line-number>1988</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_return</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedExpression</span><span style='font-weight: bold;color: #4e4e4e'>?</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedStatement</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1989</td><td class=line>        <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> expr<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1990</td><td class=line>            <span style='color: #5f00d7'>let</span> none_expr<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>1991</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Return</span><span style='color: #4e4e4e'>(</span>none_expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1992</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1993</td><td class=line>        <span style='color: #5f00d7'>let</span> checked_expr = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1994</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedStatement</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Return</span><span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1995</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>1996</td><td class=line>
</td></tr>
<tr><td class=line-number>1997</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_expression</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='color: #5f00d7'>anon</span> <span style='text-decoration: underline;'>expr</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedExpression</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedExpression</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #5f00d7'>match</span> expr <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>1998</td><td class=line>        <span style='color: #af8700'>Boolean</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Boolean</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>1999</td><td class=line>        <span style='color: #af8700'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2000</td><td class=line>            <span style='font-style: italic;color: #8a8a8a'>// FIXME: better constant support</span>
</td></tr>
<tr><td class=line-number>2001</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #5f00d7'>match</span> val <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2002</td><td class=line>                <span style='color: #af8700'>I8</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I8</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I8</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2003</td><td class=line>                <span style='color: #af8700'>I16</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I16</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I16</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2004</td><td class=line>                <span style='color: #af8700'>I32</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I32</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I32</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2005</td><td class=line>                <span style='color: #af8700'>I64</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>I64</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2006</td><td class=line>                <span style='color: #af8700'>U8</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U8</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U8</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2007</td><td class=line>                <span style='color: #af8700'>U16</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U16</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U16</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2008</td><td class=line>                <span style='color: #af8700'>U32</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U32</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U32</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2009</td><td class=line>                <span style='color: #af8700'>U64</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U64</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U64</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2010</td><td class=line>                <span style='color: #af8700'>USize</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>NumericConstant</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedNumericConstant</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>USize</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>U64</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2011</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2012</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2013</td><td class=line>        <span style='color: #af8700'>QuotedString</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>QuotedString</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2014</td><td class=line>        <span style='color: #af8700'>Call</span><span style='color: #4e4e4e'>(</span>call<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>.</span>typecheck_call<span style='color: #4e4e4e'>(</span>call<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>,</span> must_be_enum_constructor<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>false</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2015</td><td class=line>        <span style='color: #af8700'>Range</span><span style='color: #4e4e4e'>(</span>from<span style='color: #4e4e4e'>,</span> to<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2016</td><td class=line>            <span style='color: #5f00d7'>let</span> checked_from = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>from<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2017</td><td class=line>            <span style='color: #5f00d7'>let</span> checked_to = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>to<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2018</td><td class=line>
</td></tr>
<tr><td class=line-number>2019</td><td class=line>            <span style='color: #5f00d7'>let</span> from_type = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_from<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2020</td><td class=line>            <span style='color: #5f00d7'>let</span> to_type = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_to<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2021</td><td class=line>
</td></tr>
<tr><td class=line-number>2022</td><td class=line>            <span style='color: #5f00d7'>let</span> from_span = <span style='color: #4e4e4e'>.</span>expression_span<span style='color: #4e4e4e'>(</span>checked_from<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2023</td><td class=line>            <span style='color: #5f00d7'>let</span> to_span = <span style='color: #4e4e4e'>.</span>expression_span<span style='color: #4e4e4e'>(</span>checked_to<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2024</td><td class=line>
</td></tr>
<tr><td class=line-number>2025</td><td class=line>            <span style='color: #5f00d7'>let</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span> = <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2026</td><td class=line>            <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>unify<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>:</span> from_type<span style='color: #4e4e4e'>,</span> lhs_span<span style='color: #4e4e4e'>:</span> from_span<span style='color: #4e4e4e'>,</span> rhs<span style='color: #4e4e4e'>:</span> to_type<span style='color: #4e4e4e'>,</span> rhs_span<span style='color: #4e4e4e'>:</span> from_span<span style='color: #4e4e4e'>)</span> ?? <span style='color: #af8700'>UNKNOWN_TYPE_ID</span>
</td></tr>
<tr><td class=line-number>2027</td><td class=line>
</td></tr>
<tr><td class=line-number>2028</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Range</span><span style='color: #4e4e4e'>(</span>from<span style='color: #4e4e4e'>:</span> checked_from<span style='color: #4e4e4e'>,</span> to<span style='color: #4e4e4e'>:</span> checked_to<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2029</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2030</td><td class=line>        <span style='color: #af8700'>BinaryOp</span><span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>,</span> op<span style='color: #4e4e4e'>,</span> rhs<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2031</td><td class=line>            <span style='color: #5f00d7'>let</span> checked_lhs = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2032</td><td class=line>            <span style='color: #5f00d7'>mut</span> checked_rhs = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>rhs<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2033</td><td class=line>
</td></tr>
<tr><td class=line-number>2034</td><td class=line>            <span style='color: #5f00d7'>let</span> lhs_type = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_lhs<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2035</td><td class=line>
</td></tr>
<tr><td class=line-number>2036</td><td class=line>            <span style='color: #5f00d7'>let</span> promoted_rhs = <span style='color: #4e4e4e'>.</span>try_to_promote_constant_expr_to_type<span style='color: #4e4e4e'>(</span>lhs_type<span style='color: #4e4e4e'>,</span> checked_rhs<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2037</td><td class=line>            <span style='color: #5f00d7'>if</span> promoted_rhs<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2038</td><td class=line>                checked_rhs = promoted_rhs<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>2039</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2040</td><td class=line>
</td></tr>
<tr><td class=line-number>2041</td><td class=line>            <span style='color: #5f00d7'>let</span> output_type = <span style='color: #4e4e4e'>.</span>typecheck_binary_operation<span style='color: #4e4e4e'>(</span>checked_lhs<span style='color: #4e4e4e'>,</span> op<span style='color: #4e4e4e'>,</span> checked_rhs<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2042</td><td class=line>
</td></tr>
<tr><td class=line-number>2043</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>BinaryOp</span><span style='color: #4e4e4e'>(</span>lhs<span style='color: #4e4e4e'>:</span> checked_lhs<span style='color: #4e4e4e'>,</span> op<span style='color: #4e4e4e'>,</span> rhs<span style='color: #4e4e4e'>:</span> checked_rhs<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> output_type<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2044</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2045</td><td class=line>        <span style='color: #af8700'>OptionalNone</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>OptionalNone</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>.</span>new_inference<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2046</td><td class=line>        <span style='color: #af8700'>OptionalSome</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2047</td><td class=line>            <span style='color: #5f00d7'>let</span> checked_expr = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2048</td><td class=line>            <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2049</td><td class=line>            <span style='color: #5f00d7'>let</span> optional_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Optional&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2050</td><td class=line>            <span style='color: #5f00d7'>let</span> optional_type = <span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> optional_struct_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>type_id<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2051</td><td class=line>            <span style='color: #5f00d7'>let</span> optional_type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span>optional_type<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2052</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>OptionalSome</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>:</span> checked_expr<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> optional_type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2053</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2054</td><td class=line>        <span style='color: #af8700'>Var</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2055</td><td class=line>            <span style='color: #5f00d7'>let</span> var = <span style='color: #4e4e4e'>.</span>find_var_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>,</span> var<span style='color: #4e4e4e'>:</span> name<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2056</td><td class=line>            <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>match</span> var<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span> <span style='font-style: italic;color: #8a8a8a'>// FIXME: this wants to be a match on Optional instead of boolean</span>
</td></tr>
<tr><td class=line-number>2057</td><td class=line>                <span style='font-weight: bold;color: #875f00'>true</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Var</span><span style='color: #4e4e4e'>(</span>var<span style='color: #4e4e4e'>:</span> var<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2058</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2059</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Variable &#39;{}&#39; not found&quot;</span><span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2060</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Garbage</span><span style='color: #4e4e4e'>(</span>span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2061</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2062</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2063</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2064</td><td class=line>        <span style='color: #af8700'>ForcedUnwrap</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2065</td><td class=line>            <span style='color: #5f00d7'>let</span> checked_expr = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2066</td><td class=line>            <span style='color: #5f00d7'>let</span> type = <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2067</td><td class=line>
</td></tr>
<tr><td class=line-number>2068</td><td class=line>            <span style='color: #5f00d7'>let</span> optional_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Optional&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2069</td><td class=line>            <span style='color: #5f00d7'>let</span> weakptr_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;WeakPtr&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2070</td><td class=line>            <span style='color: #5f00d7'>let</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span> = <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2071</td><td class=line>
</td></tr>
<tr><td class=line-number>2072</td><td class=line>            <span style='color: #5f00d7'>let</span> type_id<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>TypeId</span> = <span style='color: #5f00d7'>match</span> type <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2073</td><td class=line>                <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2074</td><td class=line>                    <span style='color: #5f00d7'>mut</span> inner_type_id = <span style='color: #af8700'>UNKNOWN_TYPE_ID</span>
</td></tr>
<tr><td class=line-number>2075</td><td class=line>                    <span style='color: #5f00d7'>if</span>  id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>optional_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>or</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>weakptr_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2076</td><td class=line>                        inner_type_id = args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2077</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2078</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Forced unwrap only works on Optional&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2079</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2080</td><td class=line>                    <span style='color: #5f00d7'>yield</span> inner_type_id
</td></tr>
<tr><td class=line-number>2081</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2082</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2083</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Forced unwrap only works on Optional&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2084</td><td class=line>                    <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2085</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2086</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2087</td><td class=line>
</td></tr>
<tr><td class=line-number>2088</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>ForcedUnwrap</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>:</span> checked_expr<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2089</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2090</td><td class=line>        <span style='color: #af8700'>JaktArray</span><span style='color: #4e4e4e'>(</span>values<span style='color: #4e4e4e'>,</span> fill_size<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2091</td><td class=line>            <span style='color: #5f00d7'>mut</span> repeat<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>CheckedExpression</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>2092</td><td class=line>            <span style='color: #5f00d7'>match</span> fill_size<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2093</td><td class=line>                <span style='font-weight: bold;color: #875f00'>true</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2094</td><td class=line>                    <span style='font-style: italic;color: #8a8a8a'>// Check fill size is an integer.</span>
</td></tr>
<tr><td class=line-number>2095</td><td class=line>                    <span style='font-style: italic;color: #8a8a8a'>// TODO: Check fill size is positive when possible.</span>
</td></tr>
<tr><td class=line-number>2096</td><td class=line>                    <span style='color: #5f00d7'>let</span> fill_size_value = fill_size<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2097</td><td class=line>                    <span style='color: #5f00d7'>let</span> fill_size_checked = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>fill_size_value<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2098</td><td class=line>                    <span style='color: #5f00d7'>let</span> fill_size_type = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>fill_size_checked<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2099</td><td class=line>                    <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> <span style='color: #4e4e4e'>.</span>is_integer<span style='color: #4e4e4e'>(</span>fill_size_type<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2100</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>2101</td><td class=line>                            <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Type &#39;{}&#39; is not convertible to an integer. Only integer values can be array fill size expressions.&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>fill_size_type<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> 
</td></tr>
<tr><td class=line-number>2102</td><td class=line>                            fill_size_value<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2103</td><td class=line>                        <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2104</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2105</td><td class=line>                    repeat = repeat
</td></tr>
<tr><td class=line-number>2106</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2107</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span><span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2108</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2109</td><td class=line>            <span style='color: #5f00d7'>let</span> array_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Array&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2110</td><td class=line>            <span style='color: #5f00d7'>let</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span> = <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2111</td><td class=line>            <span style='color: #5f00d7'>mut</span> inner_type_id = <span style='color: #af8700'>UNKNOWN_TYPE_ID</span>
</td></tr>
<tr><td class=line-number>2112</td><td class=line>            <span style='color: #5f00d7'>mut</span> inferred_type_span<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>2113</td><td class=line>
</td></tr>
<tr><td class=line-number>2114</td><td class=line>            <span style='color: #5f00d7'>mut</span> vals<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2115</td><td class=line>            <span style='color: #5f00d7'>for</span> value <span style='color: #5f00d7'>in</span> values<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2116</td><td class=line>                <span style='color: #5f00d7'>let</span> checked_expr = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>value<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2117</td><td class=line>                <span style='color: #5f00d7'>let</span> current_value_type_id = <span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2118</td><td class=line>
</td></tr>
<tr><td class=line-number>2119</td><td class=line>                <span style='color: #5f00d7'>if</span> inner_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>UNKNOWN_TYPE_ID</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2120</td><td class=line>                    inner_type_id = current_value_type_id
</td></tr>
<tr><td class=line-number>2121</td><td class=line>                    inferred_type_span = value<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2122</td><td class=line>                <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> inner_type_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>current_value_type_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2123</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error_with_hint<span style='color: #4e4e4e'>(</span>
</td></tr>
<tr><td class=line-number>2124</td><td class=line>                        <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Type &#39;{}&#39; does not match type &#39;{}&#39; of previous values in array&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>current_value_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>inner_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>2125</td><td class=line>                        value<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>span</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span>
</td></tr>
<tr><td class=line-number>2126</td><td class=line>                        <span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;array was inferred to store type &#39;{}&#39; here&quot;</span><span style='color: #4e4e4e'>,</span> <span style='color: #4e4e4e'>.</span>type_name<span style='color: #4e4e4e'>(</span>inner_type_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'></span>
</td></tr>
<tr><td class=line-number>2127</td><td class=line>                        inferred_type_span<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>2128</td><td class=line>                    <span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2129</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2130</td><td class=line>                vals<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span>checked_expr<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2131</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2132</td><td class=line>            <span style='color: #5f00d7'>let</span> type_id = <span style='color: #4e4e4e'>.</span>find_or_add_type_id<span style='color: #4e4e4e'>(</span><span style='color: #af8700'>Type</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> array_struct_id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span>inner_type_id<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2133</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>JaktArray</span><span style='color: #4e4e4e'>(</span>vals<span style='color: #4e4e4e'>,</span> repeat<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2134</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2135</td><td class=line>        <span style='color: #af8700'>IndexedExpression</span><span style='color: #4e4e4e'>(</span>base<span style='color: #4e4e4e'>,</span> index<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2136</td><td class=line>            <span style='color: #5f00d7'>let</span> checked_base = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>base<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2137</td><td class=line>            <span style='color: #5f00d7'>let</span> checked_index = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>index<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2138</td><td class=line>
</td></tr>
<tr><td class=line-number>2139</td><td class=line>            <span style='color: #5f00d7'>let</span> <span style='color: #af8700'>UNKNOWN_TYPE_ID</span> = <span style='color: #af8700'>TypeId</span><span style='color: #4e4e4e'>(</span>module<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>ModuleId</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> id<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2140</td><td class=line>            <span style='color: #5f00d7'>let</span> array_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Array&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2141</td><td class=line>            <span style='color: #5f00d7'>let</span> dictionary_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_prelude<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Dictionary&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2142</td><td class=line>            <span style='color: #5f00d7'>mut</span> expr_type_id = <span style='color: #af8700'>UNKNOWN_TYPE_ID</span>;
</td></tr>
<tr><td class=line-number>2143</td><td class=line>
</td></tr>
<tr><td class=line-number>2144</td><td class=line>            <span style='color: #5f00d7'>match</span> <span style='color: #4e4e4e'>.</span>get_type<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_base<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2145</td><td class=line>                <span style='color: #af8700'>GenericInstance</span><span style='color: #4e4e4e'>(</span>id<span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>)</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2146</td><td class=line>                    <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>array_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2147</td><td class=line>                        <span style='color: #5f00d7'>if</span> <span style='color: #4e4e4e'>.</span>is_integer<span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>.</span>expression_type<span style='color: #4e4e4e'>(</span>checked_index<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2148</td><td class=line>                            expr_type_id = args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2149</td><td class=line>                        <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2150</td><td class=line>                            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Index is not an integer&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2151</td><td class=line>                        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2152</td><td class=line>                    <span style='color: #4e4e4e'>}</span> <span style='color: #5f00d7'>else</span> <span style='color: #5f00d7'>if</span> id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>equals</span><span style='color: #4e4e4e'>(</span>dictionary_struct_id<span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2153</td><td class=line>                        expr_type_id = args<span style='color: #4e4e4e'>[</span><span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2154</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2155</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2156</td><td class=line>                <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2157</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Index used on value that cannot be indexed&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2158</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2159</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2160</td><td class=line>
</td></tr>
<tr><td class=line-number>2161</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>IndexedExpression</span><span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>:</span> checked_base<span style='color: #4e4e4e'>,</span> index<span style='color: #4e4e4e'>:</span> checked_index<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> expr_type_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2162</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2163</td><td class=line>        <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2164</td><td class=line>            <span style='color: #005fd7'>panic</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;not complete&quot;</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2165</td><td class=line>
</td></tr>
<tr><td class=line-number>2166</td><td class=line>            <span style='color: #5f00d7'>yield</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Boolean</span><span style='color: #4e4e4e'>(</span>val<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>false</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>Span</span><span style='color: #4e4e4e'>(</span>start<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>,</span> end<span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #875f00'>0</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2167</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2168</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2169</td><td class=line>
</td></tr>
<tr><td class=line-number>2170</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>find_var_in_scope</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>var</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>)</span> -&gt; <span style='color: #005f5f'>CheckedVariable</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2171</td><td class=line>        <span style='color: #5f00d7'>mut</span> current_scope_id = scope_id
</td></tr>
<tr><td class=line-number>2172</td><td class=line>        <span style='color: #5f00d7'>loop</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2173</td><td class=line>            <span style='color: #5f00d7'>let</span> scope = <span style='color: #4e4e4e'>.</span>get_scope<span style='color: #4e4e4e'>(</span>current_scope_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2174</td><td class=line>            <span style='color: #5f00d7'>for</span> existing_var <span style='color: #5f00d7'>in</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>vars</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2175</td><td class=line>                <span style='color: #5f00d7'>if</span> existing_var<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span> == var <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2176</td><td class=line>                    <span style='color: #5f00d7'>return</span> <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>get_variable</span><span style='color: #4e4e4e'>(</span>existing_var<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2177</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2178</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2179</td><td class=line>            <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parent</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2180</td><td class=line>                break
</td></tr>
<tr><td class=line-number>2181</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2182</td><td class=line>            current_scope_id = scope<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>parent</span><span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>2183</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2184</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>2185</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2186</td><td class=line>
</td></tr>
<tr><td class=line-number>2187</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>resolve_call</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>call</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedCall</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>namespaces</span><span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>ResolvedNamespace</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>must_be_enum_constructor</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>FunctionId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2188</td><td class=line>        <span style='color: #5f00d7'>mut</span> callee<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>2189</td><td class=line>        <span style='color: #5f00d7'>mut</span> current_scope_id = scope_id
</td></tr>
<tr><td class=line-number>2190</td><td class=line>
</td></tr>
<tr><td class=line-number>2191</td><td class=line>        <span style='color: #5f00d7'>for</span> namespace_index <span style='color: #5f00d7'>in</span> <span style='font-weight: bold;color: #875f00'>0</span>..call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>namespace_</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2192</td><td class=line>            <span style='color: #5f00d7'>let</span> scope_name = call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>namespace_</span><span style='color: #4e4e4e'>[</span>namespace_index<span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2193</td><td class=line>            <span style='color: #5f00d7'>let</span> maybe_ns_scope = <span style='color: #4e4e4e'>.</span>find_namespace_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>:</span> current_scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> scope_name<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2194</td><td class=line>            <span style='color: #5f00d7'>if</span> maybe_ns_scope<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2195</td><td class=line>                <span style='color: #5f00d7'>let</span> scope_id = maybe_ns_scope<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span>
</td></tr>
<tr><td class=line-number>2196</td><td class=line>                <span style='color: #5f00d7'>let</span> is_import = maybe_ns_scope<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>1</span>
</td></tr>
<tr><td class=line-number>2197</td><td class=line>                <span style='color: #5f00d7'>if</span> is_import <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2198</td><td class=line>                    namespaces<span style='color: #4e4e4e'>[</span>namespace_index<span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span> = <span style='color: #4e4e4e'>.</span>program<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>modules</span><span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'></span>scope_id<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>module</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>id</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span>
</td></tr>
<tr><td class=line-number>2199</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2200</td><td class=line>                current_scope_id = scope_id
</td></tr>
<tr><td class=line-number>2201</td><td class=line>                <span style='color: #5f00d7'>continue</span>
</td></tr>
<tr><td class=line-number>2202</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2203</td><td class=line>            <span style='color: #5f00d7'>let</span> maybe_struct_scope = <span style='color: #4e4e4e'>.</span>find_struct_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> scope_name<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2204</td><td class=line>            <span style='color: #5f00d7'>if</span> maybe_struct_scope<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2205</td><td class=line>                <span style='color: #5f00d7'>let</span> structure = <span style='color: #4e4e4e'>.</span>get_struct<span style='color: #4e4e4e'>(</span>maybe_struct_scope<span style='font-weight: bold;color: #4e4e4e'>!</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2206</td><td class=line>                current_scope_id = structure<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>scope_id</span>
</td></tr>
<tr><td class=line-number>2207</td><td class=line>                <span style='color: #5f00d7'>continue</span>
</td></tr>
<tr><td class=line-number>2208</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2209</td><td class=line>
</td></tr>
<tr><td class=line-number>2210</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Not a namespace, enum, class, or struct: {}&quot;</span><span style='color: #4e4e4e'>,</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>namespace_</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2211</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2212</td><td class=line>
</td></tr>
<tr><td class=line-number>2213</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// 1. Look for a function with this name.</span>
</td></tr>
<tr><td class=line-number>2214</td><td class=line>        <span style='color: #5f00d7'>let</span> maybe_function_id = <span style='color: #4e4e4e'>.</span>find_function_in_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>:</span> current_scope_id<span style='color: #4e4e4e'>,</span> function_name<span style='color: #4e4e4e'>:</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2215</td><td class=line>        <span style='color: #5f00d7'>if</span> maybe_function_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2216</td><td class=line>            <span style='color: #5f00d7'>let</span> function_id = maybe_function_id<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>2217</td><td class=line>            <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> must_be_enum_constructor <span style='color: #5f00d7'>or</span> <span style='color: #4e4e4e'>.</span>get_function<span style='color: #4e4e4e'>(</span>function_id<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>type</span> is <span style='color: #af8700'>ImplicitEnumConstructor</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2218</td><td class=line>                <span style='color: #5f00d7'>return</span> function_id
</td></tr>
<tr><td class=line-number>2219</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2220</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2221</td><td class=line>
</td></tr>
<tr><td class=line-number>2222</td><td class=line>        <span style='color: #5f00d7'>if</span> must_be_enum_constructor <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2223</td><td class=line>            <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;No such enum constructor {}&quot;</span><span style='color: #4e4e4e'>,</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2224</td><td class=line>            <span style='color: #5f00d7'>return</span> callee
</td></tr>
<tr><td class=line-number>2225</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2226</td><td class=line>
</td></tr>
<tr><td class=line-number>2227</td><td class=line>        <span style='font-style: italic;color: #8a8a8a'>// 2. Look for a struct, class or enum constructor with this name.</span>
</td></tr>
<tr><td class=line-number>2228</td><td class=line>        <span style='color: #5f00d7'>let</span> maybe_struct_id = <span style='color: #4e4e4e'>.</span>find_struct_in_scope<span style='color: #4e4e4e'>(</span>scope_id<span style='color: #4e4e4e'>:</span> current_scope_id<span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2229</td><td class=line>        <span style='color: #5f00d7'>if</span> maybe_struct_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2230</td><td class=line>            <span style='color: #5f00d7'>let</span> struct_id = maybe_struct_id<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>2231</td><td class=line>            <span style='color: #5f00d7'>let</span> structure = <span style='color: #4e4e4e'>.</span>get_struct<span style='color: #4e4e4e'>(</span>struct_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2232</td><td class=line>            <span style='color: #5f00d7'>let</span> maybe_function_id = <span style='color: #4e4e4e'>.</span>find_function_in_scope<span style='color: #4e4e4e'>(</span>parent_scope_id<span style='color: #4e4e4e'>:</span> structure<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>scope_id</span><span style='color: #4e4e4e'>,</span> function_name<span style='color: #4e4e4e'>:</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2233</td><td class=line>            <span style='color: #5f00d7'>if</span> maybe_function_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2234</td><td class=line>                <span style='color: #5f00d7'>return</span> maybe_function_id<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>2235</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2236</td><td class=line>            <span style='color: #5f00d7'>return</span> callee
</td></tr>
<tr><td class=line-number>2237</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2238</td><td class=line>
</td></tr>
<tr><td class=line-number>2239</td><td class=line>        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #005fd7'>format</span><span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Call to unknown function: {}&quot;</span><span style='color: #4e4e4e'>,</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2240</td><td class=line>
</td></tr>
<tr><td class=line-number>2241</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>2242</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2243</td><td class=line>
</td></tr>
<tr><td class=line-number>2244</td><td class=line>    <span style='color: #5f00d7'>function</span> <span style='color: #005fd7'>typecheck_call</span><span style='color: #4e4e4e'>(</span>mut <span style='font-weight: bold;'>this</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>call</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ParsedCall</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>scope_id</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>ScopeId</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>span</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>Span</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>safety_mode</span><span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>SafetyMode</span><span style='color: #4e4e4e'>,</span> <span style='text-decoration: underline;'>must_be_enum_constructor</span><span style='color: #4e4e4e'>:</span> <span style='font-weight: bold;color: #005f5f'>bool</span><span style='color: #4e4e4e'>)</span> <span style='color: #5f00d7'>throws</span> -&gt; <span style='color: #005f5f'>CheckedExpression</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2245</td><td class=line>        <span style='color: #5f00d7'>mut</span> args<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>(</span><span style='font-weight: bold;color: #005f5f'>String</span><span style='color: #4e4e4e'>,</span> <span style='color: #005f5f'>CheckedExpression</span><span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2246</td><td class=line>        <span style='color: #5f00d7'>mut</span> return_type = <span style='color: #005fd7'>builtin</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>BuiltinType</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Void</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2247</td><td class=line>        <span style='color: #5f00d7'>mut</span> callee_throws = <span style='font-weight: bold;color: #875f00'>false</span>
</td></tr>
<tr><td class=line-number>2248</td><td class=line>
</td></tr>
<tr><td class=line-number>2249</td><td class=line>        <span style='color: #5f00d7'>mut</span> resolved_namespaces<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>ResolvedNamespace</span><span style='color: #4e4e4e'>]</span> = <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2250</td><td class=line>        <span style='color: #5f00d7'>for</span> name <span style='color: #5f00d7'>in</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>namespace_</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2251</td><td class=line>            <span style='color: #5f00d7'>let</span> generic_parameters<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #005f5f'>TypeId</span><span style='color: #4e4e4e'>]</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>2252</td><td class=line>            resolved_namespaces<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #af8700'>ResolvedNamespace</span><span style='color: #4e4e4e'>(</span>name<span style='color: #4e4e4e'>,</span> generic_parameters<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2253</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2254</td><td class=line>
</td></tr>
<tr><td class=line-number>2255</td><td class=line>        <span style='color: #5f00d7'>match</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2256</td><td class=line>            <span style='color: #008700'>&quot;print&quot;</span> | <span style='color: #008700'>&quot;println&quot;</span> | <span style='color: #008700'>&quot;eprintln&quot;</span> | <span style='color: #008700'>&quot;format&quot;</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2257</td><td class=line>                <span style='color: #5f00d7'>for</span> arg <span style='color: #5f00d7'>in</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>args</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>iterator</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2258</td><td class=line>                    <span style='color: #5f00d7'>let</span> checked_arg = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>:</span> arg<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2259</td><td class=line>
</td></tr>
<tr><td class=line-number>2260</td><td class=line>                    args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'></span><span style='color: #4e4e4e'>(</span>call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>,</span> checked_arg<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2261</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2262</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2263</td><td class=line>            <span style='color: #5f00d7'>else</span> <span style='font-weight: bold;color: #4e4e4e'>=&gt;</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2264</td><td class=line>                <span style='color: #5f00d7'>let</span> maybe_function_id = <span style='color: #4e4e4e'>.</span>resolve_call<span style='color: #4e4e4e'>(</span>call<span style='color: #4e4e4e'>,</span> namespaces<span style='color: #4e4e4e'>:</span> resolved_namespaces<span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> must_be_enum_constructor<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2265</td><td class=line>
</td></tr>
<tr><td class=line-number>2266</td><td class=line>                <span style='color: #5f00d7'>if</span> <span style='color: #5f00d7'>not</span> maybe_function_id<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>has_value</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2267</td><td class=line>                    <span style='color: #5f00d7'>let</span> none_function_id<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>2268</td><td class=line>                    <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Call</span><span style='color: #4e4e4e'>(</span>call<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedCall</span><span style='color: #4e4e4e'>(</span>namespace_<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>,</span> function_id<span style='color: #4e4e4e'>:</span> none_function_id<span style='color: #4e4e4e'>,</span> return_type<span style='color: #4e4e4e'>,</span> callee_throws<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> return_type<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2269</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2270</td><td class=line>
</td></tr>
<tr><td class=line-number>2271</td><td class=line>                <span style='color: #5f00d7'>let</span> function_id = maybe_function_id<span style='font-weight: bold;color: #4e4e4e'>!</span>
</td></tr>
<tr><td class=line-number>2272</td><td class=line>                <span style='color: #5f00d7'>let</span> callee = <span style='color: #4e4e4e'>.</span>get_function<span style='color: #4e4e4e'>(</span>function_id<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2273</td><td class=line>                callee_throws = callee<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>can_throw</span>
</td></tr>
<tr><td class=line-number>2274</td><td class=line>                return_type = callee<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>return_type_id</span>
</td></tr>
<tr><td class=line-number>2275</td><td class=line>
</td></tr>
<tr><td class=line-number>2276</td><td class=line>                <span style='color: #5f00d7'>if</span> callee<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>params</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> != call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>args</span><span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2277</td><td class=line>                    <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Wrong number of arguments&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2278</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2279</td><td class=line>
</td></tr>
<tr><td class=line-number>2280</td><td class=line>                <span style='color: #5f00d7'>for</span> i <span style='color: #5f00d7'>in</span> <span style='font-weight: bold;color: #875f00'>0</span>..call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>args</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>size</span><span style='color: #4e4e4e'>(</span><span style='color: #4e4e4e'>)</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2281</td><td class=line>                    <span style='color: #5f00d7'>let</span> parsed_label_and_arg = call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>args</span><span style='color: #4e4e4e'>[</span>i<span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2282</td><td class=line>                    <span style='color: #5f00d7'>let</span> param = callee<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>params</span><span style='color: #4e4e4e'>[</span>i<span style='color: #4e4e4e'>]</span>
</td></tr>
<tr><td class=line-number>2283</td><td class=line>                    <span style='color: #5f00d7'>if</span> param<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>requires_label</span> <span style='color: #5f00d7'>and</span> parsed_label_and_arg<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>0</span> != param<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>variable</span><span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span> <span style='color: #4e4e4e'>{</span>
</td></tr>
<tr><td class=line-number>2284</td><td class=line>                        <span style='color: #4e4e4e'>.</span>error<span style='color: #4e4e4e'>(</span><span style='color: #008700'>&quot;Wrong parameter name in argument label&quot;</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2285</td><td class=line>                    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2286</td><td class=line>                    <span style='color: #5f00d7'>let</span> checked_arg = <span style='color: #4e4e4e'>.</span>typecheck_expression<span style='color: #4e4e4e'>(</span>expr<span style='color: #4e4e4e'>:</span> parsed_label_and_arg<span style='color: #4e4e4e'>.</span><span style='font-weight: bold;color: #875f00'>1</span><span style='color: #4e4e4e'>,</span> scope_id<span style='color: #4e4e4e'>,</span> safety_mode<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2287</td><td class=line>
</td></tr>
<tr><td class=line-number>2288</td><td class=line>                    <span style='font-style: italic;color: #8a8a8a'>// FIXME: Check argument/parameter type compatibility</span>
</td></tr>
<tr><td class=line-number>2289</td><td class=line>
</td></tr>
<tr><td class=line-number>2290</td><td class=line>                    args<span style='color: #4e4e4e'>.</span><span style='color: #005fd7'>push</span><span style='color: #4e4e4e'>(</span><span style='color: #005fd7'></span><span style='color: #4e4e4e'>(</span>call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>,</span> checked_arg<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2291</td><td class=line>                <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2292</td><td class=line>            <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2293</td><td class=line>        <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2294</td><td class=line>
</td></tr>
<tr><td class=line-number>2295</td><td class=line>        <span style='color: #5f00d7'>let</span> none_function_id<span style='color: #4e4e4e'>:</span> <span style='color: #005f5f'>FunctionId</span><span style='font-weight: bold;color: #4e4e4e'>?</span> = <span style='color: #5f00d7'>None</span>
</td></tr>
<tr><td class=line-number>2296</td><td class=line>        <span style='color: #5f00d7'>return</span> <span style='color: #af8700'>CheckedExpression</span><span style='color: #4e4e4e'>::</span><span style='color: #af0000'>Call</span><span style='color: #4e4e4e'>(</span>call<span style='color: #4e4e4e'>:</span> <span style='color: #af8700'>CheckedCall</span><span style='color: #4e4e4e'>(</span>namespace_<span style='color: #4e4e4e'>:</span> <span style='color: #4e4e4e'>[</span><span style='color: #4e4e4e'>]</span><span style='color: #4e4e4e'>,</span> name<span style='color: #4e4e4e'>:</span> call<span style='color: #4e4e4e'>.</span><span style='color: #af0000'>name</span><span style='color: #4e4e4e'>,</span> args<span style='color: #4e4e4e'>,</span> function_id<span style='color: #4e4e4e'>:</span> none_function_id<span style='color: #4e4e4e'>,</span> return_type<span style='color: #4e4e4e'>,</span> callee_throws<span style='color: #4e4e4e'>)</span><span style='color: #4e4e4e'>,</span> span<span style='color: #4e4e4e'>,</span> type_id<span style='color: #4e4e4e'>:</span> return_type<span style='color: #4e4e4e'>)</span>
</td></tr>
<tr><td class=line-number>2297</td><td class=line>    <span style='color: #4e4e4e'>}</span>
</td></tr>
<tr><td class=line-number>2298</td><td class=line><span style='color: #4e4e4e'>}</span>
</td></tr>
</table>

</body>

